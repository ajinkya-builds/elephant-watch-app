{"version":3,"file":"ReportActivityPage-BQs2VLNt.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/camera.js","../../../node_modules/lucide-react/dist/esm/icons/clock.js","../../../node_modules/lucide-react/dist/esm/icons/compass.js","../../../node_modules/lucide-react/dist/esm/icons/lock-open.js","../../../node_modules/lucide-react/dist/esm/icons/lock.js","../../../node_modules/lucide-react/dist/esm/icons/navigation.js","../../../node_modules/lucide-react/dist/esm/icons/upload.js","../../../node_modules/@radix-ui/react-progress/dist/index.mjs","../../src/components/ui/progress.tsx","../../src/contexts/ActivityFormContext.tsx","../../src/hooks/useGeolocation.ts","../../src/components/form-steps/DateTimeLocationStep.tsx","../../../node_modules/@radix-ui/react-radio-group/dist/index.mjs","../../src/components/ui/radio-group.tsx","../../src/components/form-steps/ObservationTypeStep.tsx","../../src/components/form-steps/CompassBearingStep.tsx","../../src/components/form-steps/PhotoStep.tsx","../../src/components/ActivityReportStepper.tsx","../../src/pages/ReportActivityPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Camera = createLucideIcon(\"Camera\", [\n  [\n    \"path\",\n    {\n      d: \"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z\",\n      key: \"1tc9qg\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"13\", r: \"3\", key: \"1vg3eu\" }]\n]);\n\nexport { Camera as default };\n//# sourceMappingURL=camera.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Compass = createLucideIcon(\"Compass\", [\n  [\n    \"path\",\n    {\n      d: \"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z\",\n      key: \"9ktpf1\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Compass as default };\n//# sourceMappingURL=compass.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LockOpen = createLucideIcon(\"LockOpen\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 9.9-1\", key: \"1mm8w8\" }]\n]);\n\nexport { LockOpen as default };\n//# sourceMappingURL=lock-open.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Navigation = createLucideIcon(\"Navigation\", [\n  [\"polygon\", { points: \"3 11 22 2 13 21 11 13 3 11\", key: \"1ltx0t\" }]\n]);\n\nexport { Navigation as default };\n//# sourceMappingURL=navigation.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","\"use client\";\n\n// src/progress.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar PROGRESS_NAME = \"Progress\";\nvar DEFAULT_MAX = 100;\nvar [createProgressContext, createProgressScope] = createContextScope(PROGRESS_NAME);\nvar [ProgressProvider, useProgressContext] = createProgressContext(PROGRESS_NAME);\nvar Progress = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeProgress,\n      value: valueProp = null,\n      max: maxProp,\n      getValueLabel = defaultGetValueLabel,\n      ...progressProps\n    } = props;\n    if ((maxProp || maxProp === 0) && !isValidMaxNumber(maxProp)) {\n      console.error(getInvalidMaxError(`${maxProp}`, \"Progress\"));\n    }\n    const max = isValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\n    if (valueProp !== null && !isValidValueNumber(valueProp, max)) {\n      console.error(getInvalidValueError(`${valueProp}`, \"Progress\"));\n    }\n    const value = isValidValueNumber(valueProp, max) ? valueProp : null;\n    const valueLabel = isNumber(value) ? getValueLabel(value, max) : void 0;\n    return /* @__PURE__ */ jsx(ProgressProvider, { scope: __scopeProgress, value, max, children: /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"aria-valuemax\": max,\n        \"aria-valuemin\": 0,\n        \"aria-valuenow\": isNumber(value) ? value : void 0,\n        \"aria-valuetext\": valueLabel,\n        role: \"progressbar\",\n        \"data-state\": getProgressState(value, max),\n        \"data-value\": value ?? void 0,\n        \"data-max\": max,\n        ...progressProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nProgress.displayName = PROGRESS_NAME;\nvar INDICATOR_NAME = \"ProgressIndicator\";\nvar ProgressIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeProgress, ...indicatorProps } = props;\n    const context = useProgressContext(INDICATOR_NAME, __scopeProgress);\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": getProgressState(context.value, context.max),\n        \"data-value\": context.value ?? void 0,\n        \"data-max\": context.max,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nProgressIndicator.displayName = INDICATOR_NAME;\nfunction defaultGetValueLabel(value, max) {\n  return `${Math.round(value / max * 100)}%`;\n}\nfunction getProgressState(value, maxValue) {\n  return value == null ? \"indeterminate\" : value === maxValue ? \"complete\" : \"loading\";\n}\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\nfunction isValidMaxNumber(max) {\n  return isNumber(max) && !isNaN(max) && max > 0;\n}\nfunction isValidValueNumber(value, max) {\n  return isNumber(value) && !isNaN(value) && value <= max && value >= 0;\n}\nfunction getInvalidMaxError(propValue, componentName) {\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`${DEFAULT_MAX}\\`.`;\n}\nfunction getInvalidValueError(propValue, componentName) {\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be:\n  - a positive number\n  - less than the value passed to \\`max\\` (or ${DEFAULT_MAX} if no \\`max\\` prop is set)\n  - \\`null\\` or \\`undefined\\` if the progress is indeterminate.\n\nDefaulting to \\`null\\`.`;\n}\nvar Root = Progress;\nvar Indicator = ProgressIndicator;\nexport {\n  Indicator,\n  Progress,\n  ProgressIndicator,\n  Root,\n  createProgressScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-800\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","import { createContext, useContext, useState, ReactNode } from 'react';\n\n\nexport type FormStep = 'dateTimeLocation' | 'observationType' | 'compassBearing' | 'photo';\n\ninterface ActivityFormData {\n  activity_date: string | Date | null;\n  activity_time: string | null;\n  observation_type: string | null;\n  latitude: number | null;\n  longitude: number | null;\n  total_elephants: number | null;\n  male_elephants: number | null;\n  female_elephants: number | null;\n  unknown_elephants: number | null;\n  calves: number | null;\n  indirect_sighting_type: string | null;\n  loss_type: string | null;\n  compass_bearing: number | null;\n  photo_url: string | null;\n}\n\ninterface ActivityFormContextType {\n  currentStep: FormStep;\n  formData: ActivityFormData;\n  goToNextStep: () => void;\n  goToPreviousStep: () => void;\n  updateFormData: (data: Partial<ActivityFormData>) => void;\n  isStepValid: (step: FormStep) => boolean;\n  isLastStep: () => boolean;\n  resetForm: () => void;\n  isPhotoUploading: boolean;\n  setIsPhotoUploading: (isUploading: boolean) => void;\n}\n\nconst initialFormData: ActivityFormData = {\n  activity_date: null,\n  activity_time: null,\n  observation_type: null,\n  latitude: null,\n  longitude: null,\n  total_elephants: null,\n  male_elephants: null,\n  female_elephants: null,\n  unknown_elephants: null,\n  calves: null,\n  indirect_sighting_type: null,\n  loss_type: null,\n  compass_bearing: null,\n  photo_url: null,\n};\n\nconst ActivityFormContext = createContext<ActivityFormContextType | undefined>(undefined);\n\nexport function ActivityFormProvider({ children }: { children: ReactNode }) {\n  const [currentStep, setCurrentStep] = useState<FormStep>('dateTimeLocation');\n  const [formData, setFormData] = useState<ActivityFormData>(initialFormData);\n  const [isPhotoUploading, setIsPhotoUploading] = useState(false);\n\n  const steps: FormStep[] = ['dateTimeLocation', 'observationType', 'compassBearing', 'photo'];\n\n  const goToNextStep = () => {\n    const currentIndex = steps.indexOf(currentStep);\n    if (currentIndex < steps.length - 1) {\n      setCurrentStep(steps[currentIndex + 1]);\n    }\n  };\n\n  const goToPreviousStep = () => {\n    const currentIndex = steps.indexOf(currentStep);\n    if (currentIndex > 0) {\n      setCurrentStep(steps[currentIndex - 1]);\n    }\n  };\n\n  const updateFormData = (data: Partial<ActivityFormData>) => {\n    setFormData(prev => ({ ...prev, ...data }));\n  };\n\n  const isStepValid = (step: FormStep): boolean => {\n    switch (step) {\n      case 'dateTimeLocation':\n        return !!formData.activity_date && !!formData.activity_time && \n               formData.latitude !== null && formData.longitude !== null;\n      case 'observationType':\n        return !!formData.observation_type;\n      case 'compassBearing':\n        return formData.compass_bearing !== null;\n      case 'photo':\n        return true; // Photo is optional\n      default:\n        return false;\n    }\n  };\n\n  const isLastStep = () => {\n    return currentStep === steps[steps.length - 1];\n  };\n\n  const resetForm = () => {\n    setFormData(initialFormData);\n    setCurrentStep('dateTimeLocation');\n    setIsPhotoUploading(false);\n  };\n\n  return (\n    <ActivityFormContext.Provider\n      value={{\n        currentStep,\n        formData,\n        goToNextStep,\n        goToPreviousStep,\n        updateFormData,\n        isStepValid,\n        isLastStep,\n        resetForm,\n        isPhotoUploading,\n        setIsPhotoUploading,\n      }}\n    >\n      {children}\n    </ActivityFormContext.Provider>\n  );\n}\n\nexport function useActivityForm() {\n  const context = useContext(ActivityFormContext);\n  if (context === undefined) {\n    throw new Error('useActivityForm must be used within an ActivityFormProvider');\n  }\n  return context;\n}","import { useState, useEffect } from 'react';\n\ninterface GeolocationState {\n  latitude: number | null;\n  longitude: number | null;\n  error: string | null;\n}\n\nexport const useGeolocation = () => {\n  const [state, setState] = useState<GeolocationState>({\n    latitude: null,\n    longitude: null,\n    error: null\n  });\n\n  useEffect(() => {\n    if (!navigator.geolocation) {\n      setState(prev => ({\n        ...prev,\n        error: 'Geolocation is not supported by your browser'\n      }));\n      return;\n    }\n\n    const successHandler = (position: GeolocationPosition) => {\n      setState({\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        error: null\n      });\n    };\n\n    const errorHandler = (error: GeolocationPositionError) => {\n      setState(prev => ({\n        ...prev,\n        error: error.message\n      }));\n    };\n\n    navigator.geolocation.getCurrentPosition(\n      successHandler,\n      errorHandler,\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      }\n    );\n  }, []);\n\n  return state;\n}; ","import React from 'react';\nimport { useActivityForm } from '@/contexts/ActivityFormContext';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useGeolocation } from '@/hooks/useGeolocation';\nimport { Button } from '@/components/ui/button';\nimport { Clock, MapPin, RefreshCw } from 'lucide-react';\n\nexport function DateTimeLocationStep() {\n  const { formData, updateFormData } = useActivityForm();\n  const { latitude, longitude, error: geoError } = useGeolocation();\n\n\n\n  const handleFetchCurrentData = () => {\n    // Set current date and time\n    const now = new Date();\n    updateFormData({\n      activity_date: now.toISOString().split('T')[0],\n      activity_time: now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' })\n    });\n    \n    // Update location from geolocation hook\n    if (latitude && longitude) {\n      updateFormData({ latitude, longitude });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-end mb-2\">\n        <Button \n          type=\"button\" \n          variant=\"outline\" \n          size=\"sm\"\n          onClick={handleFetchCurrentData}\n          className=\"flex items-center gap-2 text-sm\"\n        >\n          <RefreshCw className=\"h-4 w-4\" />\n          Get Location, Date and Time\n        </Button>\n      </div>\n      <div className=\"space-y-4\">\n        <div>\n          <div className=\"flex items-center gap-2\">\n            <Label htmlFor=\"activity_date\">Date</Label>\n            <Clock className=\"h-4 w-4 text-gray-400\" />\n          </div>\n          <Input\n            id=\"activity_date\"\n            type=\"date\"\n            value={formData.activity_date instanceof Date \n              ? formData.activity_date.toISOString().split('T')[0]\n              : formData.activity_date || ''}\n            onChange={(e) => updateFormData({ activity_date: e.target.value })}\n            required\n          />\n        </div>\n\n        <div>\n          <div className=\"flex items-center gap-2\">\n            <Label htmlFor=\"activity_time\">Time</Label>\n            <Clock className=\"h-4 w-4 text-gray-400\" />\n          </div>\n          <Input\n            id=\"activity_time\"\n            type=\"time\"\n            value={formData.activity_time || ''}\n            onChange={(e) => updateFormData({ activity_time: e.target.value })}\n            required\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center gap-2\">\n            <Label>Location</Label>\n            <MapPin className=\"h-4 w-4 text-gray-400\" />\n          </div>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"latitude\" className=\"text-sm text-gray-500\">Latitude</Label>\n              <Input\n                id=\"latitude\"\n                type=\"number\"\n                step=\"any\"\n                value={formData.latitude || ''}\n                onChange={(e) => updateFormData({ latitude: parseFloat(e.target.value) })}\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"longitude\" className=\"text-sm text-gray-500\">Longitude</Label>\n              <Input\n                id=\"longitude\"\n                type=\"number\"\n                step=\"any\"\n                value={formData.longitude || ''}\n                onChange={(e) => updateFormData({ longitude: parseFloat(e.target.value) })}\n                required\n              />\n            </div>\n          </div>\n          {geoError && (\n            <p className=\"text-sm text-red-500 mt-1\">\n              Error getting location: {geoError}\n            </p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n} ","\"use client\";\n\n// src/radio-group.tsx\nimport * as React2 from \"react\";\nimport { composeEventHandlers as composeEventHandlers2 } from \"@radix-ui/primitive\";\nimport { useComposedRefs as useComposedRefs2 } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope as createContextScope2 } from \"@radix-ui/react-context\";\nimport { Primitive as Primitive2 } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\n\n// src/radio.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar RADIO_NAME = \"Radio\";\nvar [createRadioContext, createRadioScope] = createContextScope(RADIO_NAME);\nvar [RadioProvider, useRadioContext] = createRadioContext(RADIO_NAME);\nvar Radio = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadio,\n      name,\n      checked = false,\n      required,\n      disabled,\n      value = \"on\",\n      onCheck,\n      form,\n      ...radioProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    return /* @__PURE__ */ jsxs(RadioProvider, { scope: __scopeRadio, checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"radio\",\n          \"aria-checked\": checked,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...radioProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            if (!checked) onCheck?.();\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        RadioBubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nRadio.displayName = RADIO_NAME;\nvar INDICATOR_NAME = \"RadioIndicator\";\nvar RadioIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadio, forceMount, ...indicatorProps } = props;\n    const context = useRadioContext(INDICATOR_NAME, __scopeRadio);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.checked, children: /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nRadioIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"RadioBubbleInput\";\nvar RadioBubbleInput = React.forwardRef(\n  ({\n    __scopeRadio,\n    control,\n    checked,\n    bubbles = true,\n    ...props\n  }, forwardedRef) => {\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"radio\",\n        \"aria-hidden\": true,\n        defaultChecked: checked,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0\n        }\n      }\n    );\n  }\n);\nRadioBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\n\n// src/radio-group.tsx\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nvar ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"];\nvar RADIO_GROUP_NAME = \"RadioGroup\";\nvar [createRadioGroupContext, createRadioGroupScope] = createContextScope2(RADIO_GROUP_NAME, [\n  createRovingFocusGroupScope,\n  createRadioScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar useRadioScope = createRadioScope();\nvar [RadioGroupProvider, useRadioGroupContext] = createRadioGroupContext(RADIO_GROUP_NAME);\nvar RadioGroup = React2.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadioGroup,\n      name,\n      defaultValue,\n      value: valueProp,\n      required = false,\n      disabled = false,\n      orientation,\n      dir,\n      loop = true,\n      onValueChange,\n      ...groupProps\n    } = props;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      defaultProp: defaultValue ?? null,\n      onChange: onValueChange,\n      caller: RADIO_GROUP_NAME\n    });\n    return /* @__PURE__ */ jsx2(\n      RadioGroupProvider,\n      {\n        scope: __scopeRadioGroup,\n        name,\n        required,\n        disabled,\n        value,\n        onValueChange: setValue,\n        children: /* @__PURE__ */ jsx2(\n          RovingFocusGroup.Root,\n          {\n            asChild: true,\n            ...rovingFocusGroupScope,\n            orientation,\n            dir: direction,\n            loop,\n            children: /* @__PURE__ */ jsx2(\n              Primitive2.div,\n              {\n                role: \"radiogroup\",\n                \"aria-required\": required,\n                \"aria-orientation\": orientation,\n                \"data-disabled\": disabled ? \"\" : void 0,\n                dir: direction,\n                ...groupProps,\n                ref: forwardedRef\n              }\n            )\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroup.displayName = RADIO_GROUP_NAME;\nvar ITEM_NAME = \"RadioGroupItem\";\nvar RadioGroupItem = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, disabled, ...itemProps } = props;\n    const context = useRadioGroupContext(ITEM_NAME, __scopeRadioGroup);\n    const isDisabled = context.disabled || disabled;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    const ref = React2.useRef(null);\n    const composedRefs = useComposedRefs2(forwardedRef, ref);\n    const checked = context.value === itemProps.value;\n    const isArrowKeyPressedRef = React2.useRef(false);\n    React2.useEffect(() => {\n      const handleKeyDown = (event) => {\n        if (ARROW_KEYS.includes(event.key)) {\n          isArrowKeyPressedRef.current = true;\n        }\n      };\n      const handleKeyUp = () => isArrowKeyPressedRef.current = false;\n      document.addEventListener(\"keydown\", handleKeyDown);\n      document.addEventListener(\"keyup\", handleKeyUp);\n      return () => {\n        document.removeEventListener(\"keydown\", handleKeyDown);\n        document.removeEventListener(\"keyup\", handleKeyUp);\n      };\n    }, []);\n    return /* @__PURE__ */ jsx2(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !isDisabled,\n        active: checked,\n        children: /* @__PURE__ */ jsx2(\n          Radio,\n          {\n            disabled: isDisabled,\n            required: context.required,\n            checked,\n            ...radioScope,\n            ...itemProps,\n            name: context.name,\n            ref: composedRefs,\n            onCheck: () => context.onValueChange(itemProps.value),\n            onKeyDown: composeEventHandlers2((event) => {\n              if (event.key === \"Enter\") event.preventDefault();\n            }),\n            onFocus: composeEventHandlers2(itemProps.onFocus, () => {\n              if (isArrowKeyPressedRef.current) ref.current?.click();\n            })\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroupItem.displayName = ITEM_NAME;\nvar INDICATOR_NAME2 = \"RadioGroupIndicator\";\nvar RadioGroupIndicator = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, ...indicatorProps } = props;\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    return /* @__PURE__ */ jsx2(RadioIndicator, { ...radioScope, ...indicatorProps, ref: forwardedRef });\n  }\n);\nRadioGroupIndicator.displayName = INDICATOR_NAME2;\nvar Root2 = RadioGroup;\nvar Item2 = RadioGroupItem;\nvar Indicator = RadioGroupIndicator;\nexport {\n  Indicator,\n  Item2 as Item,\n  RadioGroup,\n  RadioGroupIndicator,\n  RadioGroupItem,\n  Root2 as Root,\n  createRadioGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","import React, { useCallback, useMemo } from 'react';\nimport { useActivityForm } from '@/contexts/ActivityFormContext';\n\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport debounce from 'lodash/debounce';\n\n\n\nimport { ObservationType, IndirectSightingType, LossType } from '@/types/activity-report';\n\nconst observationTypes: { value: ObservationType; label: string }[] = [\n  { value: 'direct', label: 'Direct Sighting' },\n  { value: 'indirect', label: 'Indirect Sighting' },\n  { value: 'loss', label: 'Loss Report' }\n];\n\nconst indirectSightingTypes: { value: IndirectSightingType; label: string }[] = [\n  { value: 'Pugmark', label: 'Pugmark' },\n  { value: 'Dung', label: 'Dung' },\n  { value: 'Broken Branches', label: 'Broken Branches' },\n  { value: 'Sound', label: 'Sound' },\n  { value: 'Eyewitness', label: 'Eyewitness' }\n];\n\nconst lossTypes: { value: LossType; label: string }[] = [\n  { value: 'No loss', label: 'No Loss' },\n  { value: 'crop', label: 'Crop Damage' },\n  { value: 'livestock', label: 'Livestock Loss' },\n  { value: 'property', label: 'Property Damage' },\n  { value: 'fencing', label: 'Fencing Damage' },\n  { value: 'solar panels', label: 'Solar Panel Damage' },\n  { value: 'FD establishment', label: 'FD Establishment Damage' },\n  { value: 'Other', label: 'Other Loss' }\n];\n\nexport const ObservationTypeStep: React.FC = () => {\n  const { formData, updateFormData } = useActivityForm();\n\n  const handleObservationTypeChange = (value: ObservationType) => {\n    updateFormData({ observation_type: value });\n  };\n\n  // Debounced handlers for number inputs\n  const debouncedSetFormData = useMemo(\n    () => debounce((updates: Partial<typeof formData>) => {\n      updateFormData(updates);\n    }, 300),\n    [updateFormData]\n  );\n\n  const handleNumberChange = useCallback((field: string, value: string) => {\n    const num = parseInt(value);\n    if (!isNaN(num) && num >= 0) {\n      debouncedSetFormData({ [field]: num });\n    }\n  }, [debouncedSetFormData]);\n\n  const handleSelectChange = useCallback((field: string, value: string) => {\n    updateFormData({ [field]: value });\n  }, [updateFormData]);\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"space-y-4\">\n            <div>\n              <Label>Type of Observation</Label>\n              <RadioGroup\n                value={formData.observation_type}\n                onValueChange={handleObservationTypeChange}\n                className=\"mt-2\"\n              >\n                {observationTypes.map((type) => (\n                  <div key={type.value} className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value={type.value} id={type.value} />\n                    <Label htmlFor={type.value}>{type.label}</Label>\n                  </div>\n                ))}\n              </RadioGroup>\n            </div>\n\n            {formData.observation_type === 'indirect' && (\n  <div>\n    <Label>Indirect Sighting Type</Label>\n    <Select\n      value={formData.indirect_sighting_type || ''}\n      onValueChange={value => handleSelectChange('indirect_sighting_type', value)}\n    >\n      <SelectTrigger className=\"w-full bg-white border-gray-200 shadow-sm hover:border-blue-500 transition-colors\">\n        <SelectValue placeholder=\"Select type of indirect sighting\" />\n      </SelectTrigger>\n      <SelectContent>\n        {indirectSightingTypes.map((type) => (\n          <SelectItem key={type.value} value={type.value}>{type.label}</SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  </div>\n)}\n\n            {formData.observation_type === 'loss' && (\n  <div>\n    <Label>Loss Type</Label>\n    <Select\n      value={formData.loss_type || ''}\n      onValueChange={value => handleSelectChange('loss_type', value)}\n    >\n      <SelectTrigger className=\"w-full bg-white border-gray-200 shadow-sm hover:border-blue-500 transition-colors\">\n        <SelectValue placeholder=\"Select type of loss\" />\n      </SelectTrigger>\n      <SelectContent>\n        {lossTypes.map((type) => (\n          <SelectItem key={type.value} value={type.value}>{type.label}</SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  </div>\n)}\n          </div>\n        </CardContent>\n      </Card>\n\n      {formData.observation_type === 'direct' && (\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"total_elephants\">Total Elephants</Label>\n                <Input\n                  type=\"number\"\n                  id=\"total_elephants\"\n                  min=\"0\"\n                  value={formData.total_elephants || ''}\n                  onChange={(e) => handleNumberChange('total_elephants', e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"male_elephants\">Male Elephants</Label>\n                <Input\n                  type=\"number\"\n                  id=\"male_elephants\"\n                  min=\"0\"\n                  value={formData.male_elephants || ''}\n                  onChange={(e) => handleNumberChange('male_elephants', e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"female_elephants\">Female Elephants</Label>\n                <Input\n                  type=\"number\"\n                  id=\"female_elephants\"\n                  min=\"0\"\n                  value={formData.female_elephants || ''}\n                  onChange={(e) => handleNumberChange('female_elephants', e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"unknown_elephants\">Unknown Elephants</Label>\n                <Input\n                  type=\"number\"\n                  id=\"unknown_elephants\"\n                  min=\"0\"\n                  value={formData.unknown_elephants || ''}\n                  onChange={(e) => handleNumberChange('unknown_elephants', e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"calves\">Calves</Label>\n                <Input\n                  type=\"number\"\n                  id=\"calves\"\n                  min=\"0\"\n                  value={formData.calves || ''}\n                  onChange={(e) => handleNumberChange('calves', e.target.value)}\n                />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      \n\n      \n    </div>\n  );\n}; ","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useActivityForm } from '@/contexts/ActivityFormContext';\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Compass, Lock, Unlock, RefreshCw, AlertCircle, Camera, Navigation } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { ActivityReport } from '@/types/activity-report';\n\ninterface CompassState {\n  heading: number;\n  accuracy: number;\n  isGPSBased: boolean;\n  isErratic: boolean;\n  speed: number;\n}\n\nconst VELOCITY_THRESHOLD = 1; // meters per second\nconst ERRATIC_THRESHOLD = 45; // degrees\nconst SMOOTHING_WINDOW = 5; // number of readings to average\nconst GPS_ACCURACY_THRESHOLD = 10; // meters\n\nexport function CompassBearingStep() {\n  const { formData, updateFormData } = useActivityForm();\n  const [isTracking, setIsTracking] = useState(false);\n  const [isLocked, setIsLocked] = useState(false);\n  const [isCalibrating, setIsCalibrating] = useState(false);\n  const [calibrationSamples, setCalibrationSamples] = useState<number[]>([]);\n  const [calibrationOffset, setCalibrationOffset] = useState(0);\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\n  const [isIOS, setIsIOS] = useState(false);\n  const [compassMode, setCompassMode] = useState<'gps' | 'manual' | 'visual'>('gps');\n  const [compassState, setCompassState] = useState<CompassState>({\n    heading: 0,\n    accuracy: 0,\n    isGPSBased: false,\n    isErratic: false,\n    speed: 0\n  });\n  \n  const headingHistory = useRef<number[]>([]);\n  const lastPosition = useRef<GeolocationPosition | null>(null);\n  const lastHeading = useRef<number | null>(null);\n  const watchId = useRef<number | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    // Check if device is iOS\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(window as any).MSStream;\n    setIsIOS(isIOSDevice);\n\n    // Load saved calibration offset\n    const savedOffset = localStorage.getItem('compassCalibrationOffset');\n    if (savedOffset) {\n      setCalibrationOffset(parseFloat(savedOffset));\n    }\n\n    // Load saved compass mode\n    const savedMode = localStorage.getItem('compassMode');\n    if (savedMode) {\n      setCompassMode(savedMode as 'gps' | 'manual' | 'visual');\n    }\n\n    // Check if device orientation is supported\n    if (window.DeviceOrientationEvent) {\n      if (isIOSDevice) {\n        setHasPermission(false);\n      } else {\n        setHasPermission(true);\n      }\n    } else {\n      toast.error(\"Device orientation is not supported on this device\");\n      setHasPermission(false);\n    }\n\n    return () => {\n      if (watchId.current !== null) {\n        navigator.geolocation.clearWatch(watchId.current);\n      }\n      if (videoRef.current && videoRef.current.srcObject) {\n        const tracks = (videoRef.current.srcObject as MediaStream).getTracks();\n        tracks.forEach(track => track.stop());\n      }\n    };\n  }, []);\n\n  const requestPermission = async () => {\n    try {\n      if (isIOS && typeof (DeviceOrientationEvent as any).requestPermission === 'function') {\n        const permission = await (DeviceOrientationEvent as any).requestPermission();\n        if (permission === 'granted') {\n          setHasPermission(true);\n          toast.success(\"Compass access granted\");\n        } else {\n          setHasPermission(false);\n          toast.error(\"Compass access denied\");\n        }\n      }\n    } catch (error) {\n      console.error('Error requesting permission:', error);\n      toast.error(\"Failed to get compass access\");\n      setHasPermission(false);\n    }\n  };\n\n  const handleCompassBearingChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    if (!isNaN(value) && value >= 0 && value <= 360) {\n      updateFormData({ compass_bearing: value });\n    }\n  };\n\n  const startCalibration = () => {\n    if (compassMode === 'visual') {\n      startVisualCalibration();\n    } else {\n      startManualCalibration();\n    }\n  };\n\n  const startManualCalibration = () => {\n    setIsCalibrating(true);\n    toast.info(\"Point your device north and tap 'Set North' when ready\");\n  };\n\n  const setNorth = () => {\n    if (lastHeading.current !== null) {\n      const offset = (360 - lastHeading.current) % 360;\n      setCalibrationOffset(offset);\n      localStorage.setItem('compassCalibrationOffset', offset.toString());\n      setIsCalibrating(false);\n      toast.success(\"North direction set successfully\");\n    }\n  };\n\n  const startVisualCalibration = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        video: { facingMode: 'environment' } \n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        setIsCalibrating(true);\n        toast.info(\"Align the camera with a known landmark and tap 'Set Direction'\");\n      }\n    } catch (error) {\n      console.error('Error accessing camera:', error);\n      toast.error(\"Failed to access camera\");\n    }\n  };\n\n  const setVisualDirection = () => {\n    if (canvasRef.current && videoRef.current) {\n      const canvas = canvasRef.current;\n      const video = videoRef.current;\n      const context = canvas.getContext('2d');\n      \n      if (context) {\n        // Draw the current frame\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        \n        // Get the image data for analysis\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        \n        // Here you would implement image analysis to determine direction\n        // For now, we'll use a placeholder value\n        const visualHeading = 0; // Replace with actual image analysis\n        \n        setCalibrationOffset(visualHeading);\n        localStorage.setItem('compassCalibrationOffset', visualHeading.toString());\n        setIsCalibrating(false);\n        toast.success(\"Direction set from visual reference\");\n      }\n    }\n  };\n\n  const handleGPSUpdate = useCallback((position: GeolocationPosition) => {\n    if (!isTracking || isLocked || !lastPosition.current) {\n      lastPosition.current = position;\n      return;\n    }\n\n    const { speed, accuracy } = position.coords;\n    const prevPos = lastPosition.current.coords;\n    const currPos = position.coords;\n\n    // Update compass state with speed\n    setCompassState(prev => ({\n      ...prev,\n      speed: speed || 0,\n      accuracy: accuracy <= GPS_ACCURACY_THRESHOLD ? 1 : 0.5\n    }));\n\n    // Use GPS heading when moving fast enough\n    if (speed && speed > VELOCITY_THRESHOLD) {\n      const heading = Math.round(\n        (Math.atan2(\n          currPos.longitude - prevPos.longitude,\n          currPos.latitude - prevPos.latitude\n        ) * 180 / Math.PI + 360) % 360\n      );\n\n      setCompassState(prev => ({\n        ...prev,\n        heading,\n        isGPSBased: true,\n        isErratic: false\n      }));\n\n      if (!isLocked) {\n        updateFormData({ compass_bearing: heading });\n      }\n    } else if (compassMode === 'manual' && lastHeading.current !== null) {\n      // Use manual calibration when not moving\n      const calibratedHeading = (lastHeading.current + calibrationOffset) % 360;\n      setCompassState(prev => ({\n        ...prev,\n        heading: calibratedHeading,\n        isGPSBased: false,\n        isErratic: false\n      }));\n\n      if (!isLocked) {\n        updateFormData({ compass_bearing: calibratedHeading });\n      }\n    }\n\n    lastPosition.current = position;\n  }, [isTracking, isLocked, updateFormData, compassMode, calibrationOffset]);\n\n  const handleDeviceOrientation = useCallback((event: DeviceOrientationEvent & { webkitCompassHeading?: number }) => {\n    if (!isTracking || isLocked) return;\n\n    let heading = 0;\n    if (isIOS && event.webkitCompassHeading) {\n      heading = event.webkitCompassHeading;\n    } else if (event.alpha !== null) {\n      heading = Math.round((360 - event.alpha) % 360);\n    }\n\n    lastHeading.current = heading;\n\n    // Only use device orientation in manual mode when not moving\n    if (compassMode === 'manual' && compassState.speed <= VELOCITY_THRESHOLD) {\n      const calibratedHeading = (heading + calibrationOffset) % 360;\n      \n      // Update heading history for smoothing\n      headingHistory.current = [...headingHistory.current.slice(-SMOOTHING_WINDOW + 1), calibratedHeading];\n      \n      // Calculate smoothed heading\n      const smoothedHeading = Math.round(\n        headingHistory.current.reduce((a, b) => a + b, 0) / headingHistory.current.length\n      );\n\n      setCompassState(prev => ({\n        ...prev,\n        heading: smoothedHeading,\n        accuracy: 0.8,\n        isGPSBased: false,\n        isErratic: false\n      }));\n\n      if (!isLocked) {\n        updateFormData({ compass_bearing: smoothedHeading });\n      }\n    }\n  }, [isTracking, isLocked, calibrationOffset, updateFormData, compassMode, compassState.speed]);\n\n  useEffect(() => {\n    if (isTracking) {\n      // Start GPS tracking\n      watchId.current = navigator.geolocation.watchPosition(\n        handleGPSUpdate,\n        (error) => console.error('GPS Error:', error),\n        { enableHighAccuracy: true }\n      );\n\n      // Add device orientation listener for manual mode\n      if (compassMode === 'manual') {\n        window.addEventListener('deviceorientation', handleDeviceOrientation as EventListener);\n      }\n    }\n    return () => {\n      if (watchId.current !== null) {\n        navigator.geolocation.clearWatch(watchId.current);\n      }\n      window.removeEventListener('deviceorientation', handleDeviceOrientation as EventListener);\n    };\n  }, [isTracking, handleGPSUpdate, handleDeviceOrientation, compassMode]);\n\n  const toggleTracking = () => {\n    setIsTracking(!isTracking);\n    if (!isTracking) {\n      toast.info(\"Compass tracking started\");\n    } else {\n      toast.info(\"Compass tracking stopped\");\n    }\n  };\n\n  const toggleLock = () => {\n    setIsLocked(!isLocked);\n    if (!isLocked) {\n      toast.info(\"Compass bearing locked\");\n    } else {\n      toast.info(\"Compass bearing unlocked\");\n    }\n  };\n\n  const handleModeChange = (mode: 'gps' | 'manual' | 'visual') => {\n    setCompassMode(mode);\n    localStorage.setItem('compassMode', mode);\n    toast.info(`Switched to ${mode} mode`);\n  };\n\n  const getAccuracyColor = (accuracy: number) => {\n    if (accuracy >= 0.8) return \"bg-green-500\";\n    if (accuracy >= 0.5) return \"bg-yellow-500\";\n    return \"bg-red-500\";\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col items-center space-y-4\">\n            <Tabs defaultValue={compassMode} onValueChange={(v) => handleModeChange(v as 'gps' | 'manual' | 'visual')}>\n              <TabsList>\n                <TabsTrigger value=\"gps\">\n                  <Navigation className=\"w-4 h-4 mr-2\" />\n                  GPS\n                </TabsTrigger>\n                <TabsTrigger value=\"manual\">\n                  <Compass className=\"w-4 h-4 mr-2\" />\n                  Manual\n                </TabsTrigger>\n                <TabsTrigger value=\"visual\">\n                  <Camera className=\"w-4 h-4 mr-2\" />\n                  Visual\n                </TabsTrigger>\n              </TabsList>\n            </Tabs>\n\n            <div className=\"flex items-center space-x-4\">\n              <Button\n                variant={isTracking ? \"destructive\" : \"default\"}\n                onClick={toggleTracking}\n                className=\"flex items-center space-x-2\"\n              >\n                <Compass className={`w-4 h-4 ${isTracking ? 'animate-spin' : ''}`} />\n                <span>{isTracking ? 'Stop Tracking' : 'Start Tracking'}</span>\n              </Button>\n\n              <Button\n                variant={isLocked ? \"default\" : \"outline\"}\n                onClick={toggleLock}\n                className=\"flex items-center space-x-2\"\n                disabled={!isTracking}\n              >\n                {isLocked ? <Lock className=\"w-4 h-4\" /> : <Unlock className=\"w-4 h-4\" />}\n                <span>{isLocked ? 'Unlock' : 'Lock'}</span>\n              </Button>\n\n              {isCalibrating ? (\n                <Button\n                  variant=\"default\"\n                  onClick={compassMode === 'visual' ? setVisualDirection : setNorth}\n                  className=\"flex items-center space-x-2\"\n                >\n                  <Navigation className=\"w-4 h-4\" />\n                  <span>Set {compassMode === 'visual' ? 'Direction' : 'North'}</span>\n                </Button>\n              ) : (\n                <Button\n                  variant=\"outline\"\n                  onClick={startCalibration}\n                  className=\"flex items-center space-x-2\"\n                  disabled={!isTracking}\n                >\n                  <RefreshCw className={`w-4 h-4 ${isCalibrating ? 'animate-spin' : ''}`} />\n                  <span>Calibrate</span>\n                </Button>\n              )}\n            </div>\n\n            <div className=\"text-center space-y-2\">\n              <Label htmlFor=\"compass_bearing\" className=\"text-lg\">\n                Compass Bearing (0-360)\n              </Label>\n              <div className=\"flex items-center space-x-2\">\n                <Input\n                  type=\"number\"\n                  id=\"compass_bearing\"\n                  min=\"0\"\n                  max=\"360\"\n                  value={formData.compass_bearing || ''}\n                  onChange={handleCompassBearingChange}\n                  className=\"w-32 text-center\"\n                  disabled={isTracking && !isLocked}\n                />\n                <span className=\"text-lg\"></span>\n              </div>\n            </div>\n\n            {isTracking && (\n              <div className=\"w-full space-y-2\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span>Accuracy:</span>\n                  <div className=\"flex items-center space-x-2\">\n                    <Progress value={compassState.accuracy * 100} className=\"w-24\" />\n                    <span className={`w-3 h-3 rounded-full ${getAccuracyColor(compassState.accuracy)}`} />\n                  </div>\n                </div>\n                {compassState.isGPSBased && (\n                  <div className=\"text-sm text-blue-500\">\n                    Using GPS-based heading (Speed: {compassState.speed.toFixed(1)} m/s)\n                  </div>\n                )}\n                {compassState.isErratic && (\n                  <div className=\"flex items-center space-x-2 text-sm text-red-500\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    <span>Compass readings are erratic. Please calibrate or use manual mode.</span>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {compassMode === 'visual' && isCalibrating && (\n              <div className=\"relative w-full aspect-video\">\n                <video\n                  ref={videoRef}\n                  autoPlay\n                  playsInline\n                  className=\"w-full h-full object-cover rounded-lg\"\n                />\n                <canvas\n                  ref={canvasRef}\n                  className=\"hidden\"\n                  width={640}\n                  height={480}\n                />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-32 h-32 border-2 border-white rounded-full opacity-50\" />\n                </div>\n              </div>\n            )}\n\n            <div className=\"text-sm text-gray-500 text-center max-w-md\">\n              Enter the compass bearing in degrees, where:\n              <ul className=\"mt-2 space-y-1\">\n                <li>0 or 360 = North</li>\n                <li>90 = East</li>\n                <li>180 = South</li>\n                <li>270 = West</li>\n              </ul>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","import React, { useState, useRef } from 'react';\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Button } from \"@/components/ui/button\";\nimport { useActivityForm } from '@/contexts/ActivityFormContext';\nimport { Camera, Upload } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { supabase } from '@/lib/supabase';\n\nexport const PhotoStep: React.FC = () => {\n  const { formData, updateFormData, setIsPhotoUploading } = useActivityForm();\n  const [isUploading, setIsUploadingLocal] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      toast.error('Please select an image file');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      toast.error('Image size should be less than 5MB');\n      return;\n    }\n\n    console.log('handleFileChange: Starting photo upload process');\n    setIsUploadingLocal(true);\n    setIsPhotoUploading(true);\n    console.log('handleFileChange: isUploadingLocal and isPhotoUploading set to true');\n    try {\n      const fileExt = file.name.split('.').pop();\n      const fileName = `${Math.random()}.${fileExt}`;\n      const filePath = `activity-photos/${fileName}`;\n\n      const uploadPromise = supabase.storage\n        .from('photos')\n        .upload(filePath, file);\n\n      const timeoutPromise = new Promise<never>((_, reject) => {\n        const id = setTimeout(() => {\n          clearTimeout(id);\n          reject(new Error('Photo upload timed out (30 seconds)'));\n        }, 30000); // 30 seconds\n      });\n\n      const result = await Promise.race([\n        uploadPromise,\n        timeoutPromise\n      ]);\n\n      // Check if the result is an error from the timeout or Supabase\n      if (result && typeof result === 'object' && 'error' in result && result.error) {\n        console.error('handleFileChange: Supabase upload error:', result.error);\n        throw result.error;\n      } else if (result instanceof Error) { // This handles the timeout error\n        console.error('handleFileChange: Timeout error:', result.message);\n        toast.error(result.message); // Display the timeout message to the user\n        throw result; // Re-throw to ensure finally block is reached\n      }\n\n      const { data: { publicUrl } } = supabase.storage\n        .from('photos')\n        .getPublicUrl(filePath);\n\n      updateFormData({ photo_url: publicUrl });\n      console.log('handleFileChange: Photo uploaded successfully. Public URL:', publicUrl);\n      toast.success('Photo uploaded successfully');\n    } catch (error) {\n      console.error('handleFileChange: Caught error during photo upload:', error);\n      // Only show a generic error if it's not the specific timeout error already handled\n      if (!(error instanceof Error && error.message.includes('timed out')))\n      {\n        toast.error('Failed to upload photo. Please try again.');\n      }\n    } finally {\n      console.log('handleFileChange: Finally block executed. Setting isUploadingLocal and isPhotoUploading to false');\n      setIsUploadingLocal(false);\n      setIsPhotoUploading(false);\n    }\n  };\n\n  const handleCameraClick = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"space-y-4\">\n            <div>\n              <Label>Photo</Label>\n              <div className=\"mt-2 flex flex-col items-center justify-center\">\n                {formData.photo_url ? (\n                  <div className=\"relative w-full max-w-md\">\n                    <img\n                      src={formData.photo_url}\n                      alt=\"Activity photo\"\n                      className=\"w-full h-64 object-cover rounded-lg\"\n                    />\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      className=\"absolute top-2 right-2\"\n                      onClick={() => updateFormData({ photo_url: undefined })}\n                    >\n                      Remove\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"w-full max-w-md h-64 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center\">\n                    <Camera className=\"w-12 h-12 text-gray-400 mb-4\" />\n                    <p className=\"text-gray-500 mb-4\">No photo selected</p>\n                    <Button\n                      onClick={handleCameraClick}\n                      disabled={isUploading}\n                    >\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      {isUploading ? 'Uploading...' : 'Upload Photo'}\n                    </Button>\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleFileChange}\n                      className=\"hidden\"\n                    />\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}; ","import React, { useState, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Button } from \"@/components/ui/button\";\nimport { MapPin, FileText, Compass, Camera } from \"lucide-react\";\nimport { ActivityFormProvider, useActivityForm, FormStep } from '@/contexts/ActivityFormContext';\nimport { DateTimeLocationStep } from '@/components/form-steps/DateTimeLocationStep';\nimport { ObservationTypeStep } from '@/components/form-steps/ObservationTypeStep';\nimport { CompassBearingStep } from '@/components/form-steps/CompassBearingStep';\nimport { PhotoStep } from '@/components/form-steps/PhotoStep';\nimport { toast } from \"sonner\";\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/NewAuthContext';\nimport { supabase } from '@/lib/supabaseClient';\nimport { ActivityReport, ObservationType, IndirectSightingType, LossType } from '@/types/activity-report';\n\ninterface StepConfig {\n  type: FormStep;\n  title: string;\n  icon: React.ReactNode;\n  component: React.ComponentType;\n}\n\nconst steps: StepConfig[] = [\n  {\n    type: 'dateTimeLocation',\n    title: \"Date/Time & Location\",\n    icon: <MapPin className=\"w-5 h-5\" />,\n    component: DateTimeLocationStep,\n  },\n  {\n    type: 'observationType',\n    title: \"Type of Observation\",\n    icon: <FileText className=\"w-5 h-5\" />,\n    component: ObservationTypeStep,\n  },\n  {\n    type: 'compassBearing',\n    title: \"Compass Bearing\",\n    icon: <Compass className=\"w-5 h-5\" />,\n    component: CompassBearingStep,\n  },\n  {\n    type: 'photo',\n    title: \"Photo\",\n    icon: <Camera className=\"w-5 h-5\" />,\n    component: PhotoStep,\n  },\n];\n\ninterface ActivityReportStepperProps {\n  onSubmit: (reportData: Partial<ActivityReport>) => Promise<void>;\n  isSubmitting: boolean;\n}\n\ninterface ActivityFormData {\n  observation_type: ObservationType;\n  latitude: string | number;\n  longitude: string | number;\n  photo_url?: string | null;\n  indirect_sighting_type?: IndirectSightingType | null;\n  loss_type?: LossType | null;\n  activity_date?: Date;\n  activity_time?: string;\n}\n\nconst formatDate = (date: Date | string | undefined): string => {\n  if (!date) return '';\n  const d = date instanceof Date ? date : new Date(date);\n  return d.toISOString().split('T')[0];\n};\n\nconst StepperContent: React.FC<ActivityReportStepperProps> = ({ onSubmit, isSubmitting: externalIsSubmitting }) => {\n  const { currentStep, formData, goToNextStep, goToPreviousStep, isStepValid, isLastStep, resetForm, isPhotoUploading } = useActivityForm();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const currentStepIndex = steps.findIndex(step => step.type === currentStep);\n\n  \n  const isActuallySubmitting = isSubmitting || externalIsSubmitting;\n\n  const handleSubmit = useCallback(async () => {\n    console.log('handleSubmit: Starting form submission.');\n    try {\n      setIsSubmitting(true);\n      console.log('handleSubmit: isSubmitting set to true.');\n\n      \n      if (!formData.activity_date || !formData.activity_time || !formData.observation_type) {\n        toast.error('Please fill in all required fields');\n        return;\n      }\n\n      let userId = user?.id || null;\n      \n      if (!userId) {\n        const { data: { session } } = await supabase.auth.getSession();\n        if (session?.user) {\n          userId = session.user.id;\n        }\n      }\n      \n      const formattedDate = formatDate(formData.activity_date);\n      const formattedTime = formData.activity_time || '';\n      \n      // Prepare the report data with all required fields\n      const reportData: Partial<ActivityReport> = {\n        // Required fields\n        user_id: userId || '',\n\n        activity_date: new Date(formattedDate),\n        activity_time: formattedTime,\n        observation_type: formData.observation_type as ObservationType,\n        latitude: String(formData.latitude || '0'),\n        longitude: String(formData.longitude || '0'),\n\n        \n        // Optional fields with type conversion\n        total_elephants: formData.total_elephants ? Number(formData.total_elephants) : undefined,\n        male_elephants: formData.male_elephants ? Number(formData.male_elephants) : undefined,\n        female_elephants: formData.female_elephants ? Number(formData.female_elephants) : undefined,\n        unknown_elephants: formData.unknown_elephants ? Number(formData.unknown_elephants) : undefined,\n        calves: formData.calves ? Number(formData.calves) : undefined,\n        compass_bearing: formData.compass_bearing ? Number(formData.compass_bearing) : undefined,\n        photo_url: formData.photo_url || undefined,\n        indirect_sighting_type: formData.indirect_sighting_type as IndirectSightingType | undefined,\n        loss_type: formData.loss_type as LossType | undefined\n      };\n      \n      // Ensure required fields are present\n      if (!reportData.observation_type) {\n        throw new Error('Observation type is required');\n      }\n      if (!reportData.latitude || !reportData.longitude) {\n        throw new Error('Location is required');\n      }\n      \n      try {\n        await onSubmit(reportData);\n        toast.success('Activity report submitted successfully');\n        resetForm();\n        navigate('/');\n      } catch (error) {\n        console.error('handleSubmit: Error submitting report:', error);\n        toast.error('Failed to submit report');\n      } finally {\n        // Ensure isSubmitting is set to false even if onSubmit throws an error\n        // This is already handled by the outer finally, but adding here for clarity/redundancy\n        setIsSubmitting(false);\n        console.log('handleSubmit: Inner try-catch finally block. isSubmitting set to false.');\n      }\n    } catch (error: any) {\n      console.error('Error submitting activity report:', error);\n      toast.error(error.message || 'Failed to submit report');\n    } finally {\n      setIsSubmitting(false);\n      console.log('handleSubmit: Outer finally block. isSubmitting set to false.');\n    }\n  }, [formData, navigate, onSubmit, resetForm, user]);\n\n  const CurrentStepComponent = steps.find(step => step.type === currentStep)?.component || null;\n\n\n\n  return (\n    <div className=\"container mx-auto p-2 sm:p-4\">\n      <Card className=\"w-full max-w-full sm:max-w-2xl bg-white rounded-xl shadow-sm border border-gray-100 mx-auto\">\n        <CardHeader className=\"space-y-4 sm:space-y-6 p-4 sm:p-6 border-b border-gray-100\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0\">\n            <CardTitle className=\"text-lg sm:text-2xl font-bold text-gray-900\">\n              Elephant Watch Report\n            </CardTitle>\n            <div className=\"flex items-center gap-2 sm:gap-3 w-full sm:w-auto\">\n              <span className=\"text-xs sm:text-sm font-medium text-gray-600\">\n                Step {currentStepIndex + 1} of {steps.length}\n              </span>\n              <Progress \n                value={((currentStepIndex + 1) / steps.length) * 100} \n                className=\"w-full sm:w-48 h-2 bg-gray-100\" \n              />\n            </div>\n          </div>\n          <div className=\"flex flex-nowrap overflow-x-auto gap-2 pb-2 sm:pb-0 -mx-2 sm:mx-0 px-2 sm:px-0\">\n            {steps.map((step, index) => (\n              <Button\n                key={step.type}\n                variant={index === currentStepIndex ? \"default\" : \"outline\"}\n                size=\"sm\"\n                className={\n                  `flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-md transition-colors whitespace-nowrap text-xs sm:text-sm\n                  ${index === currentStepIndex \n                    ? 'bg-blue-600 hover:bg-blue-700 text-white border-blue-600' \n                    : 'bg-white hover:bg-gray-50 text-gray-600 border-gray-200'}`\n                }\n                disabled={index > currentStepIndex && !isStepValid(steps[index - 1].type)}\n              >\n                {step.icon}\n                {step.title}\n              </Button>\n            ))}\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-4 sm:p-6\">\n          {CurrentStepComponent && <CurrentStepComponent />}\n          <div className=\"flex flex-col sm:flex-row justify-between mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-100 gap-2 sm:gap-0\">\n            <Button\n              variant=\"outline\"\n              onClick={goToPreviousStep}\n              disabled={currentStepIndex === 0 || isActuallySubmitting}\n              className=\"border-gray-200 text-gray-600 hover:bg-gray-50 w-full sm:w-auto\"\n            >\n              Previous\n            </Button>\n            {isLastStep() ? (\n              <Button\n                onClick={handleSubmit}\n                disabled={(() => {\n                  const isDisabled = !isStepValid(currentStep) || isActuallySubmitting || isPhotoUploading;\n                  console.log(`Submit button disabled check: isStepValid(${currentStep})=${isStepValid(currentStep)}, isActuallySubmitting=${isActuallySubmitting}, isPhotoUploading=${isPhotoUploading}. Result: ${isDisabled}`);\n                  return isDisabled;\n                })()}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto\"\n              >\n                {isPhotoUploading ? 'Uploading Photo...' : (isActuallySubmitting ? 'Submitting...' : 'Submit Report')}\n              </Button>\n            ) : (\n              <Button\n                onClick={goToNextStep}\n                disabled={!isStepValid(currentStep) || isActuallySubmitting || isPhotoUploading}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto\"\n              >\n                Next\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport const ActivityReportStepper: React.FC<ActivityReportStepperProps> = (props) => {\n  return (\n    <ActivityFormProvider>\n      <>\n        <StepperContent {...props} />\n      </>\n    </ActivityFormProvider>\n  );\n};\n","import React, { useState } from 'react';\nimport { ActivityReportStepper } from \"@/components/ActivityReportStepper\";\nimport { supabase } from '@/lib/supabase';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from \"sonner\";\nimport { useAuth } from '@/contexts/NewAuthContext';\nimport { ActivityReport } from '@/types/activity-report';\nimport { Card } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\n\nconst ReportActivityPage = () => {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { user, loading: isAuthLoading } = useAuth();\n  const navigate = useNavigate();\n\n  // Check authentication status\n  React.useEffect(() => {\n    if (!isAuthLoading && !user) {\n      navigate('/login');\n    }\n  }, [user, isAuthLoading, navigate]);\n\n  if (isAuthLoading) {\n    return <div className=\"flex items-center justify-center h-screen\">Loading...</div>;\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  const handleSubmit = async (reportData: Partial<ActivityReport>) => {\n    setIsSubmitting(true);\n    try {\n      const { error: insertError } = await supabase\n        .from('activity_reports')\n        .insert([reportData]);\n\n      if (insertError) throw insertError;\n\n      toast.success('Activity report submitted successfully');\n      navigate('/activities');\n    } catch (err) {\n      console.error('Error submitting report:', err);\n      toast.error('Failed to submit report');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto p-2 sm:p-4\">\n        <header className=\"mb-8\">\n          <h1 className=\"text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl\">\n            Wild Elephant Monitoring System\n          </h1>\n          <h2 className=\"mt-2 text-2xl font-semibold text-gray-600\">\n                (2025)\n          </h2>\n        </header>\n\n\n\n        <Card className=\"mb-8 overflow-hidden border border-blue-100 bg-white shadow-sm\">\n          <div className=\"p-6\">\n            <div className=\"flex items-start gap-3\">\n              <AlertCircle className=\"h-6 w-6 text-blue-600 flex-shrink-0 mt-1\" />\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\"> / Instructions:</h3>\n                <ul className=\"space-y-3 text-gray-600\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-blue-600\"></span>\n                    <span>\n                             : /  ,   ,  ,  \n                      <br />\n                      <span className=\"text-gray-500\">Complete this form in four steps: Date/Time & Location, Type of Observation, Compass Bearing, and Photo.</span>\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-blue-600\"></span>\n                    <span>\n                             'Next'           'Previous'    \n                      <br />\n                      <span className=\"text-gray-500\">Fill in the required information in each step and click 'Next'. Use 'Previous' to go back to earlier steps.</span>\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-blue-600\"></span>\n                    <span>\n                      GPS   Degree Decimal    (: 23.4536 81.4763)    \n                      <br />\n                      <span className=\"text-gray-500\">Enter GPS location in Degree Decimal format (Example: 23.4536 81.4763). Accurate location is crucial.</span>\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-blue-600\"></span>\n                    <span>\n                          ,         \n                      <br />\n                      <span className=\"text-gray-500\">Based on observation type, provide elephant count or indirect evidence details.</span>\n                    </span>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </Card>\n\n        <main className=\"max-w-4xl mx-auto\">\n          <ActivityReportStepper onSubmit={handleSubmit} isSubmitting={isSubmitting} />\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportActivityPage;"],"names":["Camera","createLucideIcon","Clock","Compass","LockOpen","Lock","Navigation","Upload","PROGRESS_NAME","DEFAULT_MAX","createProgressContext","createProgressScope","createContextScope","ProgressProvider","useProgressContext","Progress","React.forwardRef","props","forwardedRef","__scopeProgress","valueProp","maxProp","getValueLabel","defaultGetValueLabel","progressProps","isValidMaxNumber","getInvalidMaxError","max","isValidValueNumber","getInvalidValueError","value","valueLabel","isNumber","jsx","Primitive","getProgressState","INDICATOR_NAME","ProgressIndicator","indicatorProps","context","maxValue","propValue","componentName","Root","Indicator","className","ref","ProgressPrimitive.Root","cn","ProgressPrimitive.Indicator","initialFormData","ActivityFormContext","createContext","ActivityFormProvider","children","currentStep","setCurrentStep","useState","formData","setFormData","isPhotoUploading","setIsPhotoUploading","steps","goToNextStep","currentIndex","goToPreviousStep","updateFormData","data","prev","isStepValid","step","isLastStep","resetForm","useActivityForm","useContext","useGeolocation","state","setState","useEffect","successHandler","position","errorHandler","error","DateTimeLocationStep","latitude","longitude","geoError","handleFetchCurrentData","now","jsxs","Button","RefreshCw","Label","Input","e","MapPin","RADIO_NAME","createRadioContext","createRadioScope","RadioProvider","useRadioContext","Radio","__scopeRadio","name","checked","required","disabled","onCheck","form","radioProps","button","setButton","React.useState","composedRefs","useComposedRefs","node","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","getState","composeEventHandlers","event","RadioBubbleInput","RadioIndicator","forceMount","Presence","BUBBLE_INPUT_NAME","control","bubbles","prevChecked","usePrevious","controlSize","useSize","React.useEffect","input","inputProto","setChecked","ARROW_KEYS","RADIO_GROUP_NAME","createRadioGroupContext","createRadioGroupScope","createContextScope2","createRovingFocusGroupScope","useRovingFocusGroupScope","useRadioScope","RadioGroupProvider","useRadioGroupContext","RadioGroup","React2.forwardRef","__scopeRadioGroup","defaultValue","orientation","dir","loop","onValueChange","groupProps","rovingFocusGroupScope","direction","useDirection","setValue","useControllableState","jsx2","RovingFocusGroup.Root","Primitive2","ITEM_NAME","RadioGroupItem","itemProps","isDisabled","radioScope","React2.useRef","useComposedRefs2","isArrowKeyPressedRef","React2.useEffect","handleKeyDown","handleKeyUp","RovingFocusGroup.Item","composeEventHandlers2","_a","INDICATOR_NAME2","RadioGroupIndicator","Root2","Item2","RadioGroupPrimitive.Root","RadioGroupPrimitive.Item","RadioGroupPrimitive.Indicator","Circle","observationTypes","indirectSightingTypes","lossTypes","ObservationTypeStep","handleObservationTypeChange","debouncedSetFormData","useMemo","debounce","updates","handleNumberChange","useCallback","field","num","handleSelectChange","Card","CardContent","type","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","VELOCITY_THRESHOLD","GPS_ACCURACY_THRESHOLD","CompassBearingStep","isTracking","setIsTracking","isLocked","setIsLocked","isCalibrating","setIsCalibrating","calibrationSamples","setCalibrationSamples","calibrationOffset","setCalibrationOffset","hasPermission","setHasPermission","isIOS","setIsIOS","compassMode","setCompassMode","compassState","setCompassState","headingHistory","useRef","lastPosition","lastHeading","watchId","videoRef","canvasRef","isIOSDevice","savedOffset","savedMode","toast","track","handleCompassBearingChange","startCalibration","startVisualCalibration","startManualCalibration","setNorth","offset","stream","setVisualDirection","canvas","video","visualHeading","handleGPSUpdate","speed","accuracy","prevPos","currPos","heading","calibratedHeading","handleDeviceOrientation","smoothedHeading","a","b","toggleTracking","toggleLock","handleModeChange","mode","getAccuracyColor","Tabs","v","TabsList","TabsTrigger","Unlock","AlertCircle","PhotoStep","isUploading","setIsUploadingLocal","fileInputRef","handleFileChange","file","fileExt","filePath","uploadPromise","supabase","timeoutPromise","reject","id","result","publicUrl","handleCameraClick","FileText","formatDate","date","StepperContent","onSubmit","externalIsSubmitting","isSubmitting","setIsSubmitting","navigate","useNavigate","user","useAuth","currentStepIndex","isActuallySubmitting","handleSubmit","userId","session","formattedDate","formattedTime","reportData","CurrentStepComponent","CardHeader","CardTitle","index","ActivityReportStepper","Fragment","ReportActivityPage","isAuthLoading","React","insertError","err"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,12]}