import{r as c,j as e,U as ue,aa as be,S as Je,ad as Oe,ae as Be,T as U,af as Me,ag as Ge,ah as Ke,ai as V,aj as ve,ak as $,al as C,am as R,an as T,ao as L,ap as J,aq as O,ar as B,as as M,at as Pe,K as _e}from"./vendor-CnUrRcg9.js";import{C as _,a as f,b as y,c as j,d as qe}from"./card-BgkI8bZ8.js";import{c as Y,B as fe,a as d}from"./index-CVoE3lMI.js";import{S as K,a as P,b as q,c as F,d as E}from"./select-Dpm1cjej.js";import{L as z}from"./label-QLLoIWWi.js";import{x as Fe,y as ye,z as je,B as Ne}from"./radix-Q9zGz_p4.js";const Ue=Fe,we=c.forwardRef(({className:n,...u},N)=>e.jsx(ye,{ref:N,className:Y("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...u}));we.displayName=ye.displayName;const H=c.forwardRef(({className:n,...u},N)=>e.jsx(je,{ref:N,className:Y("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...u}));H.displayName=je.displayName;const I=c.forwardRef(({className:n,...u},N)=>e.jsx(Ne,{ref:N,className:Y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...u}));I.displayName=Ne.displayName;function Ve({polygons:n}){const u=Pe();return c.useEffect(()=>{if(n.length>0){const N=$.latLngBounds(n.flatMap(v=>v.coordinates));u.fitBounds(N,{padding:[50,50]})}},[n,u]),null}const ze=()=>{var ae,ie,ne,oe,re,le,de,ce,me,he,xe,ge,pe;const[n,u]=c.useState({timeRange:"7d"}),[N,v]=c.useState(!0),[$e,X]=c.useState(!1),[Se,Ee]=c.useState([]),[De,Q]=c.useState([]),[Ae,G]=c.useState([]),[g,Ce]=c.useState({kpiSummary:{total_activities:0,total_users:0,total_days:0,total_elephants_sighted:0,total_loss_reports:0,loss_types:[],today_activities:0},divisionStats:[],rangeStats:[],beatStats:[],observationTypes:[],heatmap:[]}),[W,D]=c.useState(null),[He,Ie]=c.useState(!1),[Z,S]=c.useState([]),[k,ee]=c.useState([]);c.useEffect(()=>{async function t(){v(!0);try{const{data:i,error:r}=await d.from("divisions").select("id, name").order("name");if(r)throw r;const b=(i||[]).map(h=>({id:String(h.id),name:String(h.name)}));Ee(b);const{data:s,error:p}=await d.from("division_polygons").select("*");if(p)throw p;const o=(s||[]).reduce((h,l)=>{try{const m=JSON.parse(l.geojson).coordinates[0].map(w=>[w[1],w[0]]);h.push({id:l.id,name:l.name||"Unnamed Division",type:"division",coordinates:m})}catch(x){console.error("Error parsing polygon data:",x)}return h},[]);S(o)}catch(i){console.error("Error in fetchDivisions:",i),D("Failed to load divisions data")}finally{v(!1)}}t()},[]),c.useEffect(()=>{async function t(){if(!n.division){Q([]),G([]),S([]);return}v(!0);try{const{data:i,error:r}=await d.from("ranges").select("new_id, name, new_division_id").eq("new_division_id",n.division).order("name");if(r)throw r;const b=(i||[]).map(o=>({id:String(o.new_id),name:String(o.name)}));Q(b),G([]);const{data:s,error:p}=await d.from("division_polygons").select("*").eq("new_division_id",n.division).single();if(!p&&s)try{const o=s,l=JSON.parse(o.geojson).coordinates[0].map(x=>[x[1],x[0]]);S([{id:o.id,name:o.name||"Unnamed Division",type:"division",coordinates:l}])}catch(o){console.error("Error parsing polygon data:",o),S([])}else S([])}catch(i){console.error("Error in fetchRanges:",i),D("Failed to load ranges data")}finally{v(!1)}}t()},[n.division]),c.useEffect(()=>{async function t(){if(!n.range||!n.division){G([]);return}v(!0);const{data:i,error:r}=await d.from("beats").select(`
          new_id,
          name,
          new_range_id,
          new_division_id
        `).eq("new_range_id",n.range).eq("new_division_id",n.division).order("name");if(r){console.error("Error fetching beats:",r);return}const b=(i||[]).map(s=>({id:s.new_id,name:s.name}));G(b),v(!1)}t()},[n.range,n.division]);const se=async()=>{v(!0);try{const{data:t,error:i}=await d.from("v_dashboard_kpi_summary").select("*").single();if(i)throw i;const{data:r,error:b}=await d.from("v_dashboard_division_stats").select("*");if(b)throw b;const{data:s,error:p}=await d.from("v_dashboard_range_stats").select("*");if(p)throw p;const{data:o,error:h}=await d.from("v_dashboard_beat_stats").select("*");if(h)throw h;const{data:l,error:x}=await d.from("v_dashboard_observations_by_type").select("*");if(x)throw x;const{data:m,error:w}=await d.from("v_elephant_activity_observations_by_type").select("*");if(w)throw w;const A=(m==null?void 0:m.reduce((a,Le)=>a+(Number(Le.count)||0),0))||0,Te={kpiSummary:{total_activities:Number(t.total_activities)||0,total_users:Number(t.total_users)||0,total_days:Number(t.total_days)||0,total_elephants_sighted:Number(t.total_elephants_sighted)||0,total_loss_reports:A,loss_types:(m==null?void 0:m.map(a=>({type:String(a.type),count:Number(a.count)||0})))||[],today_activities:Number(t.today_activities)||0},divisionStats:(r==null?void 0:r.map(a=>({division_id:String(a.division_id),division_name:String(a.division_name),total_observations:Number(a.total_observations)||0,direct_sightings:Number(a.direct_sightings)||0,indirect_sightings:Number(a.indirect_sightings)||0,loss_reports:Number(a.loss_reports)||0,total_elephants:Number(a.total_elephants)||0,male_elephants:Number(a.male_elephants)||0,female_elephants:Number(a.female_elephants)||0,calves:Number(a.calves)||0})))||[],rangeStats:(s==null?void 0:s.map(a=>({range_id:String(a.range_id),range_name:String(a.range_name),division_id:String(a.division_id),division_name:String(a.division_name),total_observations:Number(a.total_observations)||0,direct_sightings:Number(a.direct_sightings)||0,indirect_sightings:Number(a.indirect_sightings)||0,loss_reports:Number(a.loss_reports)||0,total_elephants:Number(a.total_elephants)||0,male_elephants:Number(a.male_elephants)||0,female_elephants:Number(a.female_elephants)||0,calves:Number(a.calves)||0})))||[],beatStats:(o==null?void 0:o.map(a=>({beat_id:String(a.beat_id),beat_name:String(a.beat_name),range_id:String(a.range_id),range_name:String(a.range_name),division_id:String(a.division_id),division_name:String(a.division_name),total_observations:Number(a.total_observations)||0,direct_sightings:Number(a.direct_sightings)||0,indirect_sightings:Number(a.indirect_sightings)||0,loss_reports:Number(a.loss_reports)||0,total_elephants:Number(a.total_elephants)||0,male_elephants:Number(a.male_elephants)||0,female_elephants:Number(a.female_elephants)||0,calves:Number(a.calves)||0})))||[],observationTypes:(l==null?void 0:l.map(a=>({observation_type:String(a.observation_type),count:Number(a.count)||0})))||[],heatmap:[]};Ce(Te),D(null)}catch(t){console.error("Error fetching dashboard data:",t),D("Failed to load dashboard data")}finally{v(!1)}};c.useEffect(()=>{(async()=>{try{await se()}catch(i){console.error("Failed to load dashboard data:",i),D("Failed to load dashboard data. Some features may not be available."),v(!1)}})()},[]);const Re=(t,i)=>{u(r=>({...r,[t]:i}))},te=async()=>{X(!0);try{await se()}finally{X(!1)}};return c.useEffect(()=>{async function t(){if(!n.division){S([]);return}try{let i=[];const{data:r,error:b}=await d.from("division_polygons").select(`
            id,
            new_division_id,
            divisions!inner(
              name
            )
          `).eq("new_division_id",n.division).single();if(console.log("Division data:",r),console.log("Division error:",b),r)try{const{data:s,error:p}=await d.from("division_polygons").select("polygon").eq("id",r.id).single();if(p){console.error("Error fetching polygon:",p);return}const{data:o,error:h}=await d.rpc("st_asgeojson",{geom:s.polygon});if(h){console.error("Error converting to GeoJSON:",h);return}const l=typeof o=="string"?JSON.parse(o):o&&typeof o=="object"?o:null;console.log("Parsed division GeoJSON:",l),i.push({id:r.id,name:typeof r.divisions.name=="string"?r.divisions.name:r.divisions.name!=null?String(r.divisions.name):"",coordinates:l&&l.coordinates?l.coordinates[0].map(([x,m])=>[m,x]):[],type:"division"})}catch(s){console.error("Error processing division polygon:",s)}if(n.range){const{data:s,error:p}=await d.from("range_polygons").select(`
              id,
              new_range_id,
              ranges!inner(
                name
              )
            `).eq("new_range_id",n.range).single();if(console.log("Range data:",s),console.log("Range error:",p),s)try{const{data:o,error:h}=await d.from("range_polygons").select("polygon").eq("id",s.id).single();if(h){console.error("Error fetching polygon:",h);return}const{data:l,error:x}=await d.rpc("st_asgeojson",{geom:o.polygon});if(x){console.error("Error converting to GeoJSON:",x);return}const m=typeof l=="string"?JSON.parse(l):l&&typeof l=="object"?l:null;console.log("Parsed range GeoJSON:",m),i.push({id:s.id,name:typeof s.ranges.name=="string"?s.ranges.name:s.ranges.name!=null?String(s.ranges.name):"",coordinates:m&&m.coordinates?m.coordinates[0].map(([w,A])=>[A,w]):[],type:"range"})}catch(o){console.error("Error processing range polygon:",o)}}if(n.beat){const{data:s,error:p}=await d.from("beat_polygons").select(`
              id,
              new_beat_id,
              beats!inner(
                name
              )
            `).eq("new_beat_id",n.beat).single();if(console.log("Beat data:",s),console.log("Beat error:",p),s)try{const{data:o,error:h}=await d.from("beat_polygons").select("polygon").eq("id",s.id).single();if(h){console.error("Error fetching polygon:",h);return}const{data:l,error:x}=await d.rpc("st_asgeojson",{geom:o.polygon});if(x){console.error("Error converting to GeoJSON:",x);return}const m=typeof l=="string"?JSON.parse(l):l&&typeof l=="object"?l:null;console.log("Parsed beat GeoJSON:",m),i.push({id:s.id,name:typeof s.beats.name=="string"?s.beats.name:s.beats.name!=null?String(s.beats.name):"",coordinates:m&&m.coordinates?m.coordinates[0].map(([w,A])=>[A,w]):[],type:"beat"})}catch(o){console.error("Error processing beat polygon:",o)}}console.log("Final polygons array:",i),S(i)}catch(i){console.error("Error fetching polygon data:",i)}}t()},[n.division,n.range,n.beat]),c.useEffect(()=>{async function t(){try{const{data:i,error:r}=await d.from("activity_observation").select("id,latitude,longitude,observation_type,activity_date,activity_time,total_elephants,male_elephants,female_elephants,unknown_elephants,calves,indirect_sighting_type,loss_type,compass_bearing,photo_url,created_at,updated_at,division_id,range_id,beat_id,division_name,range_name,beat_name").order("created_at",{ascending:!1});if(r)throw console.error("Error fetching activity markers:",r),r;const b=i.filter(s=>s.latitude&&s.longitude&&s.observation_type).map(s=>({id:typeof s.id=="string"?s.id:s.id!=null?String(s.id):"",latitude:typeof s.latitude=="number"?s.latitude:s.latitude!=null&&!isNaN(Number(s.latitude))?Number(s.latitude):0,longitude:typeof s.longitude=="number"?s.longitude:s.longitude!=null&&!isNaN(Number(s.longitude))?Number(s.longitude):0,observation_type:typeof s.observation_type=="string"?s.observation_type:s.observation_type!=null?String(s.observation_type):"",activity_date:typeof s.activity_date=="string"?s.activity_date:s.activity_date!=null?String(s.activity_date):"",activity_time:typeof s.activity_time=="string"?s.activity_time:s.activity_time!=null?String(s.activity_time):"",total_elephants:typeof s.total_elephants=="number"?s.total_elephants:s.total_elephants!=null&&!isNaN(Number(s.total_elephants))?Number(s.total_elephants):0,male_elephants:typeof s.male_elephants=="number"?s.male_elephants:s.male_elephants!=null&&!isNaN(Number(s.male_elephants))?Number(s.male_elephants):0,female_elephants:typeof s.female_elephants=="number"?s.female_elephants:s.female_elephants!=null&&!isNaN(Number(s.female_elephants))?Number(s.female_elephants):0,unknown_elephants:typeof s.unknown_elephants=="number"?s.unknown_elephants:s.unknown_elephants!=null&&!isNaN(Number(s.unknown_elephants))?Number(s.unknown_elephants):0,calves:typeof s.calves=="number"?s.calves:s.calves!=null&&!isNaN(Number(s.calves))?Number(s.calves):0,indirect_sighting_type:s.indirect_sighting_type!=null?String(s.indirect_sighting_type):void 0,loss_type:s.loss_type!=null?String(s.loss_type):void 0,compass_bearing:s.compass_bearing!=null&&!isNaN(Number(s.compass_bearing))?Number(s.compass_bearing):void 0,photo_url:s.photo_url!=null?String(s.photo_url):void 0,created_at:typeof s.created_at=="string"?s.created_at:s.created_at!=null&&s.created_at!==void 0?String(s.created_at):"",updated_at:typeof s.updated_at=="string"?s.updated_at:s.updated_at!=null&&s.updated_at!==void 0?String(s.updated_at):"",division_id:typeof s.division_id=="string"?s.division_id:s.division_id!=null&&s.division_id!==void 0?String(s.division_id):"",range_id:typeof s.range_id=="string"?s.range_id:s.range_id!=null&&s.range_id!==void 0?String(s.range_id):"",beat_id:typeof s.beat_id=="string"?s.beat_id:s.beat_id!=null&&s.beat_id!==void 0?String(s.beat_id):"",division_name:typeof s.division_name=="string"?s.division_name:s.division_name!=null&&s.division_name!==void 0?String(s.division_name):"",range_name:typeof s.range_name=="string"?s.range_name:s.range_name!=null&&s.range_name!==void 0?String(s.range_name):"",beat_name:typeof s.beat_name=="string"?s.beat_name:s.beat_name!=null&&s.beat_name!==void 0?String(s.beat_name):""}));ee(b)}catch(i){console.error("Error fetching activity markers:",i),ee([])}}t()},[]),N?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ue,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading dashboard data..."})]})}):W?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),e.jsxs("p",{className:"text-red-500",children:["Error: ",W]}),e.jsx(fe,{onClick:te,className:"mt-4",children:"Try Again"})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(K,{value:n.timeRange,onValueChange:t=>Re("timeRange",t),children:[e.jsx(P,{className:"w-[180px] bg-white border-gray-200 shadow-sm hover:border-blue-500 transition-colors",children:e.jsx(q,{placeholder:"Select time range"})}),e.jsxs(F,{children:[e.jsx(E,{value:"24h",children:"Last 24 Hours"}),e.jsx(E,{value:"7d",children:"Last 7 Days"}),e.jsx(E,{value:"30d",children:"Last 30 Days"}),e.jsx(E,{value:"90d",children:"Last 90 Days"})]})]}),e.jsxs(fe,{onClick:te,className:"bg-gradient-to-r from-blue-600 to-green-600 text-white hover:from-blue-700 hover:to-green-700 shadow-sm",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(_,{className:"bg-gradient-to-br from-blue-100 to-blue-50 shadow-lg rounded-2xl hover:scale-105 hover:shadow-xl transition-all duration-300 border-0",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(y,{className:"text-base font-semibold text-blue-700",children:"Total Activities"}),e.jsx("div",{className:"bg-blue-200 p-2 rounded-full",children:e.jsx(Je,{className:"h-5 w-5 text-blue-600"})})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-3xl font-extrabold text-blue-900",children:((ae=g.kpiSummary)==null?void 0:ae.total_activities)||0}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Across all divisions"})]})]}),e.jsxs(_,{className:"bg-gradient-to-br from-green-100 to-green-50 shadow-lg rounded-2xl hover:scale-105 hover:shadow-xl transition-all duration-300 border-0",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(y,{className:"text-base font-semibold text-green-700",children:"Active Users"}),e.jsx("div",{className:"bg-green-200 p-2 rounded-full",children:e.jsx(Oe,{className:"h-5 w-5 text-green-600"})})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-3xl font-extrabold text-green-900",children:((ie=g.kpiSummary)==null?void 0:ie.total_users)||0}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Total registered users"})]})]}),e.jsxs(_,{className:"bg-gradient-to-br from-red-100 to-red-50 shadow-lg rounded-2xl hover:scale-105 hover:shadow-xl transition-transform",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(y,{className:"text-base font-semibold text-red-700",children:"Total Loss"}),e.jsx("div",{className:"bg-red-200 p-2 rounded-full",children:e.jsx(be,{className:"h-5 w-5 text-red-600"})})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-3xl font-extrabold text-red-900",children:((ne=g.kpiSummary)==null?void 0:ne.total_loss_reports)||0}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Total loss reports"})]})]}),e.jsxs(_,{className:"bg-gradient-to-br from-purple-100 to-purple-50 shadow-lg rounded-2xl hover:scale-105 hover:shadow-xl transition-transform",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(y,{className:"text-base font-semibold text-purple-700",children:"Today's Activities"}),e.jsx("div",{className:"bg-purple-200 p-2 rounded-full",children:e.jsx(Be,{className:"h-5 w-5 text-purple-600"})})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-3xl font-extrabold text-purple-900",children:((oe=g.kpiSummary)==null?void 0:oe.today_activities)||0}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Activities in last 24 hours"})]})]})]}),e.jsxs(_,{className:"border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(f,{className:"bg-gradient-to-r from-blue-50 to-green-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xl font-semibold text-gray-900",children:"Activity Map"}),e.jsx(qe,{children:"Geographic distribution of elephant activities"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-blue-600"}),"Division"]}),e.jsxs(K,{value:n.division||"",onValueChange:t=>{u(i=>({...i,division:t,range:void 0,beat:void 0}))},children:[e.jsx(P,{className:"w-full bg-white border-gray-200 shadow-sm hover:border-blue-500 transition-colors",children:e.jsx(q,{placeholder:"Select Division"})}),e.jsx(F,{children:Se.map(t=>e.jsx(E,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-blue-600"}),"Range"]}),e.jsxs(K,{value:n.range||"",onValueChange:t=>{u(i=>({...i,range:t,beat:void 0}))},disabled:!n.division,children:[e.jsx(P,{className:"w-full bg-white border-gray-200 shadow-sm hover:border-blue-500 transition-colors disabled:opacity-50",children:e.jsx(q,{placeholder:"Select Range"})}),e.jsx(F,{children:De.map(t=>e.jsx(E,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-blue-600"}),"Beat"]}),e.jsxs(K,{value:n.beat||"",onValueChange:t=>{u(i=>({...i,beat:t}))},disabled:!n.range,children:[e.jsx(P,{className:"w-full bg-white border-gray-200 shadow-sm hover:border-blue-500 transition-colors disabled:opacity-50",children:e.jsx(q,{placeholder:"Select Beat"})}),e.jsx(F,{children:Ae.map(t=>e.jsx(E,{value:t.id,children:t.name},t.id))})]})]})]})]})}),e.jsxs(j,{className:"p-6",children:[e.jsx("div",{className:"h-[500px] rounded-lg overflow-hidden border border-gray-200",children:e.jsxs(Me,{center:[10.8505,76.2711],zoom:8,style:{width:"100%",height:"100%"},children:[e.jsx(Ge,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.jsx(Ve,{polygons:Z}),Z.map(t=>(console.log("Rendering polygon:",t),e.jsx(Ke,{positions:t.coordinates,pathOptions:{color:t.type==="division"?"#2563eb":t.type==="range"?"#f97316":"#6b7280",fillColor:t.type==="division"?"#3b82f6":t.type==="range"?"#fb923c":"#9ca3af",fillOpacity:.2,weight:2},children:e.jsx(V,{children:e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.type.charAt(0).toUpperCase()+t.type.slice(1)," Boundary"]})]})})},t.id))),g.heatmap.map((t,i)=>e.jsx(ve,{position:[t.lat,t.lng],icon:$.divIcon({className:"custom-marker",html:'<div class="w-4 h-4 rounded-full bg-blue-500 border-2 border-white shadow-lg"></div>',iconSize:[16,16]}),children:e.jsx(V,{children:e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.division_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.observation_count," observations",t.total_elephants_seen>0&&` • ${t.total_elephants_seen} elephants seen`]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last observation: ",new Date(t.last_observation_date).toLocaleDateString()]})]})})},i)),k.map(t=>e.jsx(ve,{position:[t.latitude,t.longitude],icon:$.divIcon({className:"custom-marker",html:`
                      <div style="
                        width: 24px;
                        height: 24px;
                        background-color: #22c55e;
                        border: 3px solid white;
                        border-radius: 50%;
                        box-shadow: 0 0 10px rgba(0,0,0,0.3);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                      ">
                        <div style="
                          width: 8px;
                          height: 8px;
                          background-color: white;
                          border-radius: 50%;
                        "></div>
                      </div>
                    `,iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]}),children:e.jsx(V,{children:e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.observation_type}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.activity_date," ",t.activity_time]}),t.total_elephants&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Total Elephants: ",t.total_elephants,t.male_elephants&&` (${t.male_elephants} male)`,t.female_elephants&&` (${t.female_elephants} female)`,t.calves&&` (${t.calves} calves)`]}),t.indirect_sighting_type&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Evidence: ",t.indirect_sighting_type]}),t.loss_type&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Loss Type: ",t.loss_type]})]})})},t.id))]})}),e.jsx("div",{className:"mt-4 flex items-center justify-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 border-2 border-white shadow-md flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Activity Points (",k.length,")"]})]})})]})]}),e.jsxs(Ue,{defaultValue:"overview",className:"space-y-8",children:[e.jsxs(we,{className:"bg-white p-2 rounded-xl shadow-md flex gap-4",children:[e.jsx(H,{value:"overview",className:"data-[state=active]:bg-blue-100 data-[state=active]:text-blue-800 font-semibold px-6 py-2 rounded-lg transition-all duration-300",children:"Overview"}),e.jsx(H,{value:"activity",className:"data-[state=active]:bg-blue-100 data-[state=active]:text-blue-800 font-semibold px-6 py-2 rounded-lg transition-all duration-300",children:"Activity"})]}),e.jsxs(I,{value:"overview",className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(_,{className:"bg-white shadow-lg rounded-2xl border-0",children:[e.jsx(f,{children:e.jsx(y,{className:"text-lg font-bold text-gray-900",children:"Observations by Type"})}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(R,{data:g.observationTypes,barCategoryGap:24,children:[e.jsx(T,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(L,{dataKey:"observation_type",className:"text-sm"}),e.jsx(J,{className:"text-sm"}),e.jsx(O,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(B,{}),e.jsx(M,{dataKey:"count",fill:"#4f46e5",radius:[8,8,0,0],isAnimationActive:!0})]})})})})]}),e.jsxs(_,{className:"bg-white shadow-md rounded-2xl",children:[e.jsx(f,{children:e.jsx(y,{className:"text-lg font-bold text-blue-900",children:"Most Active Areas"})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Most Active Division"}),e.jsx("p",{className:"text-2xl font-extrabold text-blue-900 mt-1",children:((le=(re=g.divisionStats)==null?void 0:re[0])==null?void 0:le.division_name)||"N/A"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Observations"}),e.jsx("p",{className:"text-2xl font-extrabold text-blue-900 mt-1",children:((ce=(de=g.divisionStats)==null?void 0:de[0])==null?void 0:ce.total_observations)||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Most Active Range"}),e.jsx("p",{className:"text-2xl font-extrabold text-blue-900 mt-1",children:((he=(me=g.rangeStats)==null?void 0:me[0])==null?void 0:he.range_name)||"N/A"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Observations"}),e.jsx("p",{className:"text-2xl font-extrabold text-blue-900 mt-1",children:((ge=(xe=g.rangeStats)==null?void 0:xe[0])==null?void 0:ge.total_observations)||0})]})]})]})})]})]}),e.jsxs(_,{className:"bg-white shadow-md rounded-2xl",children:[e.jsx(f,{children:e.jsx(y,{className:"text-lg font-bold text-red-700",children:"Loss Reports Summary"})}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(R,{data:g.divisionStats,barCategoryGap:24,children:[e.jsx(T,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(L,{dataKey:"division_name",className:"text-sm"}),e.jsx(J,{className:"text-sm"}),e.jsx(O,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(B,{}),e.jsx(M,{dataKey:"loss_reports",fill:"#ef4444",radius:[8,8,0,0],isAnimationActive:!0})]})})})})]})]}),e.jsxs(I,{value:"activity",className:"space-y-8",children:[e.jsxs(_,{className:"bg-white shadow-md rounded-2xl",children:[e.jsx(f,{children:e.jsx(y,{className:"text-lg font-bold text-blue-900",children:"Activity by Division"})}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(R,{data:g.divisionStats,barCategoryGap:24,children:[e.jsx(T,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(L,{dataKey:"division_name",className:"text-sm"}),e.jsx(J,{className:"text-sm"}),e.jsx(O,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(B,{}),e.jsx(M,{dataKey:"total_observations",fill:"#4f46e5",radius:[8,8,0,0],isAnimationActive:!0})]})})})})]}),e.jsxs(_,{className:"bg-white shadow-md rounded-2xl",children:[e.jsx(f,{children:e.jsx(y,{className:"text-lg font-bold text-blue-900",children:"Activity by Range"})}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(R,{data:g.rangeStats,barCategoryGap:24,children:[e.jsx(T,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(L,{dataKey:"range_name",className:"text-sm"}),e.jsx(J,{className:"text-sm"}),e.jsx(O,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(B,{}),e.jsx(M,{dataKey:"total_observations",fill:"#4f46e5",radius:[8,8,0,0],isAnimationActive:!0})]})})})})]}),e.jsxs(_,{className:"bg-white shadow-md rounded-2xl",children:[e.jsx(f,{children:e.jsx(y,{className:"text-lg font-bold text-red-700",children:"Loss Reports by Type"})}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(R,{data:((pe=g.kpiSummary)==null?void 0:pe.loss_types)||[],barCategoryGap:24,children:[e.jsx(T,{strokeDasharray:"3 3",className:"stroke-gray-200"}),e.jsx(L,{dataKey:"type",className:"text-sm"}),e.jsx(J,{className:"text-sm"}),e.jsx(O,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(B,{}),e.jsx(M,{dataKey:"count",fill:"#ef4444",radius:[8,8,0,0],isAnimationActive:!0})]})})})})]})]})]})]})};function ss(){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 flex flex-col",children:[e.jsx(_e.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gradient-to-r from-blue-600 to-green-600 text-white shadow-lg",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative w-8 h-8",children:e.jsx("img",{src:"/elephant_photo.png",alt:"Elephant Logo",className:"relative w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight",children:"Eravat Dashboard"}),e.jsx("p",{className:"text-sm sm:text-base font-medium text-white/90 mt-1 max-w-2xl",children:"Real-time monitoring and analysis of elephant activities"})]})]})})})}),e.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"container mx-auto p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:gap-6 lg:gap-8",children:e.jsx(ze,{})})}),e.jsx("footer",{className:"mt-auto bg-white border-t",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["© ",new Date().getFullYear()," Eravat. All rights reserved."]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-blue-600 transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"text-sm text-gray-600 hover:text-blue-600 transition-colors",children:"Terms of Service"})]})]})})})]})}export{ss as default};
//# sourceMappingURL=Dashboard-C3rbX_7p.js.map
