{"version":3,"file":"AdminUsers-4BgzWclZ.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/pencil.js","../../../node_modules/lucide-react/dist/esm/icons/plus.js","../../../node_modules/lucide-react/dist/esm/icons/rotate-cw.js","../../../node_modules/lucide-react/dist/esm/icons/search.js","../../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../../node_modules/lucide-react/dist/esm/icons/triangle-alert.js","../../src/components/ui/badge.tsx","../../src/pages/AdminUsers.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"Pencil\", [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCw = createLucideIcon(\"RotateCw\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8\", key: \"1p45f6\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }]\n]);\n\nexport { RotateCw as default };\n//# sourceMappingURL=rotate-cw.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TriangleAlert = createLucideIcon(\"TriangleAlert\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import { useState, useEffect, useCallback, useReducer, useRef, useMemo } from 'react';\nimport { toast } from 'sonner';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\"\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { Plus, Pencil, Trash2, Loader2, AlertTriangle, RotateCw, Search } from 'lucide-react';\nimport { useAuth } from '@/contexts/NewAuthContext';\nimport { supabase } from '@/lib/supabaseClient';\n\n// Types\ntype UserRole = 'admin' | 'manager' | 'data_collector' | 'viewer';\ntype UserPosition = 'Ranger' | 'DFO' | 'Officer' | 'Guard' | 'Manager' | 'Admin';\n\ninterface User {\n  id: string;\n  auth_id: string;\n  email: string;\n  phone: string | null;\n  first_name: string;\n  last_name: string;\n  role: UserRole;\n  position: UserPosition;\n  is_active: boolean;\n  status: 'active' | 'inactive' | 'pending';\n  created_at: string;\n  updated_at: string;\n  created_by: string;\n}\n\ninterface ExtendedUser extends User {\n  divisions?: Array<{ id: string; name: string }>;\n  ranges?: Array<{ id: string; name: string }>;\n  beats?: Array<{ id: string; name: string }>;\n}\n\n// Define types for our state\ntype UsersState = {\n  users: ExtendedUser[];\n  loading: boolean;\n  error: string | null;\n  lastFetched: number | null;\n};\n\ntype UsersAction =\n  | { type: 'FETCH_START' }\n  | { type: 'FETCH_SUCCESS'; payload: ExtendedUser[] }\n  | { type: 'FETCH_ERROR'; error: string };\n\nconst usersReducer = (state: UsersState, action: UsersAction): UsersState => {\n  switch (action.type) {\n    case 'FETCH_START':\n      return { ...state, loading: true, error: null };\n    case 'FETCH_SUCCESS':\n      return { \n        ...state, \n        loading: false, \n        users: action.payload,\n        lastFetched: Date.now()\n      };\n    case 'FETCH_ERROR':\n      return { ...state, loading: false, error: action.error };\n    default:\n      return state;\n  }\n};\n\nexport default function AdminUsers() {\n  const [search, setSearch] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [divisions, setDivisions] = useState<Array<{ id: string; name: string }>>([]);\n  const [ranges, setRanges] = useState<Array<{ id: string; name: string }>>([]);\n  const [beats, setBeats] = useState<Array<{ id: string; name: string }>>([]);\n  const [isLoadingRanges, setIsLoadingRanges] = useState(false);\n  const [rangesError, setRangesError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  const { user } = useAuth();\n  const abortControllerRef = useRef<AbortController | null>(null);\n  const [usersState, dispatch] = useReducer(usersReducer, {\n    users: [],\n    loading: true,\n    error: null,\n    lastFetched: null\n  });\n  \n  const [newUser, setNewUser] = useState({\n    email: \"\",\n    password: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    role: 'data_collector' as UserRole,\n    position: 'Ranger' as UserPosition,\n    division_id: '',\n    range_id: '',\n    beat_id: '',\n  });\n\n  // Fetch divisions on modal open or when needed\n  useEffect(() => {\n    if (!showModal) return;\n    \n    let isMounted = true;\n    const controller = new AbortController();\n    \n    const fetchDivisions = async () => {\n      try {\n        const { data, error } = await supabase\n          .from('divisions')\n          .select('id, name')\n          .order('name')\n          .abortSignal(controller.signal);\n        \n        if (!isMounted) return;\n        \n        if (error) throw error;\n        \n        if (data) {\n          setDivisions(data as unknown as Array<{id: string, name: string}>);\n        }\n      } catch (err: unknown) {\n        const error = err as Error;\n        if (error.name !== 'AbortError') {\n          console.error('Error fetching divisions:', error);\n          toast.error('Failed to load divisions');\n        }\n      }\n    };\n    \n    // Add a small delay to prevent rapid successive calls\n    const timer = setTimeout(fetchDivisions, 100);\n    \n    return () => {\n      isMounted = false;\n      controller.abort();\n      clearTimeout(timer);\n    };\n  }, [showModal]);\n\n  // Fetch ranges when division changes (for Ranger/Guard)\n  useEffect(() => {\n    let isMounted = true;\n    \n    const shouldFetchRanges = showModal && \n                           newUser.division_id && \n                           ['Ranger', 'Guard'].includes(newUser.position);\n    \n    if (!shouldFetchRanges) {\n      if (isMounted) {\n        setRanges([]);\n        setRangesError(null);\n      }\n      return;\n    }\n    \n    async function fetchRanges() {\n      if (!isMounted) return;\n      \n      setIsLoadingRanges(true);\n      setRangesError(null);\n      \n      try {\n        const { data, error } = await supabase\n          .from('ranges')\n          .select('new_id, name, new_division_id')\n          .eq('new_division_id', newUser.division_id)\n          .order('name');\n        \n        if (!isMounted) return;\n        \n        if (error) throw error;\n        \n        const typedData = data.map(item => ({\n          id: item.new_id as string,\n          name: item.name as string\n        }));\n        \n        setRanges(typedData);\n      } catch (error) {\n        console.error('Error fetching ranges:', error);\n        if (isMounted) {\n          setRangesError('Failed to load ranges. Please try again.');\n          toast.error('Failed to load ranges');\n        }\n      } finally {\n        if (isMounted) {\n          setIsLoadingRanges(false);\n        }\n      }\n    }\n    \n    // Add a small delay to prevent rapid successive calls\n    const timer = setTimeout(fetchRanges, 300);\n    \n    return () => {\n      isMounted = false;\n      clearTimeout(timer);\n    };\n  }, [showModal, newUser.division_id, newUser.position]);\n\n  // Fetch beats when range changes (for Guard)\n  useEffect(() => {\n    let isMounted = true;\n    const controller = new AbortController();\n    \n    const shouldFetchBeats = showModal && \n                           newUser.range_id && \n                           newUser.position === 'Guard';\n    \n    if (!shouldFetchBeats) {\n      setBeats([]);\n      return;\n    }\n    \n    const fetchBeats = async () => {\n      try {\n        const { data, error } = await supabase\n          .from('beats')\n          .select('new_id, name, new_range_id, new_division_id')\n          .eq('new_range_id', newUser.range_id)\n          .eq('new_division_id', newUser.division_id)\n          .order('name')\n          .abortSignal(controller.signal);\n        \n        if (!isMounted) return;\n        \n        if (error) throw error;\n        \n        if (data) {\n          const typedData = data.map(item => ({\n            id: item.new_id as string,\n            name: item.name as string\n          }));\n          setBeats(typedData);\n        }\n      } catch (err: unknown) {\n        const error = err as Error;\n        if (error.name !== 'AbortError') {\n          console.error('Error fetching beats:', error);\n          toast.error('Failed to load beats');\n        }\n      }\n    };\n    \n    // Add a small delay to prevent rapid successive calls\n    const timer = setTimeout(fetchBeats, 300);\n    \n    return () => {\n      isMounted = false;\n      controller.abort();\n      clearTimeout(timer);\n    };\n  }, [showModal, newUser.range_id, newUser.position, newUser.division_id]);\n\n  const fetchData = useCallback(async () => {\n    // Cancel any in-progress requests\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    \n    const controller = new AbortController();\n    abortControllerRef.current = controller;\n    \n    // Don't refetch if data is fresh (less than 30 seconds old)\n    if (usersState.lastFetched && (Date.now() - usersState.lastFetched < 30000)) {\n      return;\n    }\n    \n    dispatch({ type: 'FETCH_START' });\n    \n    try {\n      const timeoutId = setTimeout(() => {\n        controller.abort('Request timed out');\n      }, 10000); // 10 second timeout\n      \n      const { data: sessionData, error: sessionError } = await supabase.auth.getSession();\n      \n      if (sessionError || !sessionData.session) {\n        throw new Error(sessionError?.message || 'Not authenticated');\n      }\n      \n      const response = await fetch(\n        `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/get-users`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${sessionData.session.access_token}`,\n            'apikey': import.meta.env.VITE_SUPABASE_ANON_KEY\n          },\n          body: JSON.stringify({}),\n          signal: controller.signal\n        }\n      );\n      \n      clearTimeout(timeoutId);\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error?.message || 'Failed to fetch users');\n      }\n      \n      const responseData = await response.json();\n      \n      if (!responseData.users) {\n        throw new Error('Invalid response format from server');\n      }\n      \n      const formattedUsers = responseData.users.map((user: any) => ({\n        ...user,\n        user_region_assignments: user.user_region_assignments || []\n      }));\n      \n      dispatch({ type: 'FETCH_SUCCESS', payload: formattedUsers });\n    } catch (err: any) {\n      // Don't show error if the fetch was aborted\n      if (err.name === 'AbortError') return;\n      \n      console.error('Error fetching users:', err);\n      const errorMessage = err.message || 'Failed to load users';\n      dispatch({ type: 'FETCH_ERROR', error: errorMessage });\n      toast.error(errorMessage);\n    }\n  }, [usersState.lastFetched]);\n  \n  useEffect(() => {\n    fetchData();\n    \n    // Set up auto-refresh every 5 minutes\n    const refreshInterval = setInterval(fetchData, 5 * 60 * 1000);\n    \n    return () => {\n      // Clean up on unmount\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n      clearInterval(refreshInterval);\n    };\n  }, [fetchData]);\n\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Basic form validation\n    if (!newUser.email || !newUser.password || !newUser.first_name || !newUser.last_name || !newUser.role || !newUser.position) {\n      toast.error('Please fill in all required fields');\n      return;\n    }\n\n    // Position-specific validation\n    if (['DFO', 'Ranger', 'Guard'].includes(newUser.position) && !newUser.division_id) {\n      toast.error('Please select a division');\n      return;\n    }\n    if (['Ranger', 'Guard'].includes(newUser.position) && !newUser.range_id) {\n      toast.error('Please select a range');\n      return;\n    }\n    if (newUser.position === 'Guard' && !newUser.beat_id) {\n      toast.error('Please select a beat');\n      return;\n    }\n\n    setIsSubmitting(true);\n    \n    try {\n      const userData = {\n        email: newUser.email,\n        password: newUser.password,\n        user_metadata: {\n          first_name: newUser.first_name,\n          last_name: newUser.last_name,\n          role: newUser.role,\n          position: newUser.position,\n        },\n      };\n      \n      // Build assignments based on position\n      const assignments: any = {\n        first_name: newUser.first_name,\n        last_name: newUser.last_name,\n        email: newUser.email,\n        role: newUser.role,\n        position: newUser.position,\n        status: 'active',\n        created_by: user?.id,\n      };\n      \n      if (newUser.position === 'DFO' && newUser.division_id) {\n        assignments.division_id = newUser.division_id;\n      }\n      if (newUser.position === 'Ranger' && newUser.division_id && newUser.range_id) {\n        assignments.division_id = newUser.division_id;\n        assignments.range_id = newUser.range_id;\n      }\n      if (newUser.position === 'Guard' && newUser.division_id && newUser.range_id && newUser.beat_id) {\n        assignments.division_id = newUser.division_id;\n        assignments.range_id = newUser.range_id;\n        assignments.beat_id = newUser.beat_id;\n      }\n\n      console.log('Calling create-user function with:', { \n        userData: { ...userData, password: '[REDACTED]' }, \n        assignments \n      });\n      \n      // Get the current session\n      const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n      const accessToken = session?.access_token;\n      \n      if (!accessToken || sessionError) {\n        throw new Error(sessionError?.message || 'No active session found. Please log in again.');\n      }\n      \n      // Make the request to the Edge Function\n      const response = await fetch(`${import.meta.env.VITE_SUPABASE_URL}/functions/v1/create-user`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${accessToken}`,\n          'apikey': import.meta.env.VITE_SUPABASE_ANON_KEY || ''\n        },\n        body: JSON.stringify({ userData, assignments })\n      });\n      \n      console.log('Raw response status:', response.status, response.statusText);\n      \n      let responseData;\n      try {\n        responseData = await response.json();\n        console.log('Response data:', responseData);\n      } catch (parseError) {\n        const text = await response.text();\n        console.error('Error parsing response. Raw response:', text);\n        throw new Error('Invalid response from server');\n      }\n      \n      if (!response.ok) {\n        console.error('Error response:', responseData);\n        const errorMessage = responseData?.error?.message || \n                            responseData?.message || \n                            `Request failed with status ${response.status}`;\n        throw new Error(errorMessage);\n      }\n      \n      // If we get here, user was created successfully\n      toast.success('User created successfully');\n      setIsSubmitting(false);\n      setShowModal(false);\n      \n      // Reset form\n      setNewUser({\n        email: '',\n        password: '',\n        first_name: '',\n        last_name: '',\n        role: 'data_collector',\n        position: 'Ranger',\n        division_id: '',\n        range_id: '',\n        beat_id: '',\n      });\n      \n      // Refresh user list\n      await fetchData();\n    } catch (err: any) {\n      console.error('Error creating user:', err);\n      const errorMessage = err.message || 'Failed to create user. Please try again.';\n      toast.error(errorMessage);\n      setIsSubmitting(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteUser = async (userToDelete: ExtendedUser) => {\n    console.log('handleDeleteUser called with:', userToDelete);\n    if (!userToDelete) {\n      console.error('No user provided to delete');\n      return;\n    }\n    \n    if (!window.confirm(`Are you sure you want to delete ${userToDelete.email}?`)) {\n      console.log('User cancelled deletion');\n      return;\n    }\n\n    try {\n      console.log('Getting current session...');\n      const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n      console.log('Session data:', { session, sessionError });\n      \n      if (sessionError) {\n        console.error('Error getting session:', sessionError);\n        throw new Error('Failed to verify authentication. Please try again.');\n      }\n      \n      if (!session) {\n        console.error('No active session found');\n        throw new Error('No active session. Please log in again.');\n      }\n\n      const requestBody = {\n        userId: userToDelete.id,\n        authId: userToDelete.auth_id || userToDelete.id, // Fallback to user.id if auth_id is not available\n      };\n\n      const functionName = 'delete-user';\n      const functionUrl = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/${functionName}`;\n      \n      console.log('Calling delete-user function with:', {\n        functionUrl,\n        method: 'POST',\n        body: requestBody,\n        hasAuthToken: !!session?.access_token\n      });\n\n      // Call the Edge Function with POST and JSON body\n      const response = await fetch(functionUrl, {\n        method: 'POST',\n        body: JSON.stringify(requestBody),\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`,\n          'apikey': import.meta.env.VITE_SUPABASE_ANON_KEY || ''\n        },\n      });\n\n      let data = null;\n      let error = null;\n      \n      try {\n        const responseData = await response.json();\n        if (!response.ok) {\n          error = responseData.error || { message: 'Unknown error occurred' };\n        } else {\n          data = responseData;\n        }\n      } catch (e) {\n        console.error('Error parsing response:', e);\n        error = { message: 'Failed to parse server response' };\n      }\n\n      console.log('delete-user function response:', { data, error });\n\n      if (error) {\n        console.error('Error from delete-user function:', {\n          name: error.name,\n          message: error.message,\n          status: error.status,\n          statusText: error.statusText,\n          cause: error.cause,\n        });\n        \n        // Try to extract more detailed error message\n        let errorMessage = error.message || 'Failed to delete user';\n        if (error.status === 500) {\n          errorMessage = 'Server error while deleting user. Please try again later.';\n        } else if (error.status === 403) {\n          errorMessage = 'You do not have permission to delete users';\n        } else if (error.status === 401) {\n          errorMessage = 'Session expired. Please log in again.';\n        }\n        \n        throw new Error(errorMessage);\n      }\n\n      if (!data) {\n        throw new Error('No response data from server');\n      }\n\n      console.log('User deleted successfully:', data);\n      \n      // Update the UI by removing the deleted user using the reducer\n      dispatch({\n        type: 'FETCH_SUCCESS',\n        payload: usersState.users.filter(u => u.id !== userToDelete.id)\n      });\n      \n      // Show success message\n      toast.success('User deleted successfully');\n      \n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to delete user';\n      \n      console.error('Error in handleDeleteUser:', {\n        error,\n        message: errorMessage,\n        stack: error instanceof Error ? error.stack : undefined\n      });\n      \n      // Show user-friendly error message\n      toast.error(errorMessage);\n    }\n  };\n\n  // Memoize filtered users to prevent unnecessary recalculations\n  const filteredUsers = useMemo(() => {\n    if (!search) return usersState.users;\n    \n    const searchTerm = search.toLowerCase();\n    return usersState.users.filter((u: ExtendedUser) =>\n      `${u.first_name} ${u.last_name}`.toLowerCase().includes(searchTerm) ||\n      u.email.toLowerCase().includes(searchTerm)\n    );\n  }, [usersState.users, search]);\n\n  // Loading skeleton\n  if (usersState.loading && usersState.users.length === 0) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex justify-between items-center\">\n          <div className=\"h-10 w-48 bg-muted rounded animate-pulse\" />\n          <div className=\"h-10 w-32 bg-muted rounded animate-pulse\" />\n        </div>\n        <div className=\"space-y-2\">\n          {[...Array(5)].map((_, i) => (\n            <div key={i} className=\"h-16 bg-muted/50 rounded-lg animate-pulse\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n  \n  // Error state with retry button\n  if (usersState.error) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"bg-destructive/10 border border-destructive text-destructive p-4 rounded-lg\">\n          <div className=\"flex items-center\">\n            <AlertTriangle className=\"w-5 h-5 mr-2\" />\n            <span>Failed to load users: {usersState.error}</span>\n          </div>\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            className=\"mt-2\"\n            onClick={fetchData}\n            disabled={usersState.loading}\n          >\n            {usersState.loading ? (\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n            ) : (\n              <RotateCw className=\"mr-2 h-4 w-4\" />\n            )}\n            Try Again\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Page Header with Blue-Green Gradient */}\n      <div className=\"rounded-2xl bg-gradient-to-r from-blue-600 to-green-500 px-6 py-6 shadow-md flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-extrabold tracking-tight text-white drop-shadow\">User Management</h1>\n          <p className=\"text-blue-100 mt-1 text-base\">Manage user accounts and permissions</p>\n        </div>\n        <Button onClick={() => setShowModal(true)} className=\"bg-white text-blue-700 hover:bg-blue-50 border-blue-200 border font-semibold shadow-sm\">\n          <Plus className=\"mr-2 h-4 w-4 text-green-600\" /> Add User\n        </Button>\n      </div>\n\n      {/* Card with Themed Border */}\n      <Card className=\"bg-gradient-to-br from-blue-50 via-green-50 to-white border-2 border-blue-100/60 shadow-lg\">\n        <CardHeader className=\"bg-gradient-to-r from-blue-100/60 to-green-100/60 rounded-t-2xl px-6 py-4 border-b border-green-200/40\">\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 w-full\">\n            <div className=\"w-full\">\n              <CardTitle className=\"text-lg mb-1 text-blue-700 font-bold tracking-wide\">Users</CardTitle>\n              <div className=\"flex flex-row gap-4 items-center\">\n                <div className=\"relative w-full max-w-md\">\n                  <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-blue-400\" />\n                  <Input\n                    placeholder=\"Search users...\"\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    className=\"w-full pl-9 bg-white/70 border border-blue-200 focus:border-green-400\"\n                  />\n                </div>\n                <span className=\"ml-2 text-sm text-green-700 font-medium bg-green-100/70 rounded-xl px-3 py-1\">\n                  {filteredUsers.length} user{filteredUsers.length !== 1 ? 's' : ''}\n                </span>\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto rounded-b-2xl\">\n            <Table className=\"min-w-full divide-y divide-blue-100\">\n              <TableHeader className=\"bg-gradient-to-r from-blue-100/40 to-green-100/40\">\n                <TableRow>\n                  <TableHead className=\"text-blue-700 font-semibold\">Name</TableHead>\n                  <TableHead className=\"text-blue-700 font-semibold\">Email</TableHead>\n                  <TableHead className=\"text-green-700 font-semibold\">Role</TableHead>\n                  <TableHead className=\"text-green-700 font-semibold\">Position</TableHead>\n                  <TableHead className=\"text-blue-700 font-semibold\">Status</TableHead>\n                  <TableHead className=\"text-right text-blue-700 font-semibold\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredUsers.map((u) => (\n                  <TableRow key={u.id} className=\"hover:bg-blue-50/60\">\n                    <TableCell className=\"font-medium text-blue-900\">{u.first_name} {u.last_name}</TableCell>\n                    <TableCell className=\"text-blue-800\">{u.email}</TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\" className=\"capitalize border-green-300 text-green-700 bg-green-50/80\">\n                        {u.role.replace('_', ' ')}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-green-800\">{u.position}</TableCell>\n                    <TableCell>\n                      <Badge variant={u.status === 'active' ? 'default' : 'destructive'} className={u.status === 'active' ? 'bg-green-100 text-green-700 border-green-300' : 'bg-red-100 text-red-700 border-red-300'}>\n                        {u.status}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex justify-end gap-2\">\n                        <Button variant=\"outline\" size=\"sm\" className=\"h-8 w-8 p-0 border-blue-200 text-blue-700 hover:bg-blue-100/60\">\n                          <Pencil className=\"h-4 w-4\" />\n                        </Button>\n                        <Button \n                          variant=\"destructive\" \n                          size=\"sm\" \n                          className=\"h-8 w-8 p-0 border-red-200 text-red-700 hover:bg-red-100/60\"\n                          onClick={(e) => {\n                            console.log('Delete button clicked');\n                            e.stopPropagation();\n                            handleDeleteUser(u);\n                          }}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </CardContent>\n      </Card>\n\n        <Dialog open={showModal} onOpenChange={setShowModal}>\n          <DialogContent className=\"sm:max-w-4xl w-[90vw] max-w-[90vw]\">\n            <DialogHeader className=\"px-1\">\n              <DialogTitle className=\"text-2xl font-bold text-blue-800\">Add New User</DialogTitle>\n              <DialogDescription className=\"text-blue-600\">\n                Create a new user account with the appropriate permissions and access levels.\n              </DialogDescription>\n            </DialogHeader>\n            <form onSubmit={handleCreateUser}>\n              <div className=\"flex flex-col md:flex-row gap-8 py-2\">\n                {/* LEFT: Personal Details */}\n                <div className=\"flex-1 bg-gradient-to-br from-blue-50 to-green-50 rounded-xl p-6 shadow-sm border border-blue-100\">\n                  <h3 className=\"text-lg font-semibold mb-4 text-blue-700\">Personal Details</h3>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"first_name\">First Name</Label>\n                      <Input\n                        id=\"first_name\"\n                        placeholder=\"John\"\n                        value={newUser.first_name}\n                        onChange={(e) => setNewUser(p => ({...p, first_name: e.target.value}))}\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"last_name\">Last Name</Label>\n                      <Input\n                        id=\"last_name\"\n                        placeholder=\"Doe\"\n                        value={newUser.last_name}\n                        onChange={(e) => setNewUser(p => ({...p, last_name: e.target.value}))}\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"email\">Email</Label>\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        placeholder=\"john.doe@example.com\"\n                        value={newUser.email}\n                        onChange={(e) => setNewUser(p => ({...p, email: e.target.value}))}\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"password\">Password</Label>\n                      <Input\n                        id=\"password\"\n                        type=\"password\"\n                        placeholder=\"••••••••\"\n                        value={newUser.password}\n                        onChange={(e) => setNewUser(p => ({...p, password: e.target.value}))}\n                        required\n                        minLength={8}\n                      />\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        Password must be at least 8 characters long\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                {/* RIGHT: Role, Position, Assignment */}\n                <div className=\"flex-1 bg-gradient-to-br from-green-50 to-blue-50 rounded-xl p-6 shadow-sm border border-green-100\">\n                  <h3 className=\"text-lg font-semibold mb-4 text-green-700\">Role & Assignment</h3>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"position\">Position</Label>\n                      <Select\n                        value={newUser.position}\n                        onValueChange={(value) => setNewUser(p => ({ ...p, position: value as UserPosition }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select position\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"DFO\">DFO</SelectItem>\n                          <SelectItem value=\"Ranger\">Ranger</SelectItem>\n                          <SelectItem value=\"Guard\">Guard</SelectItem>\n                          <SelectItem value=\"Officer\">Officer</SelectItem>\n                          <SelectItem value=\"Manager\">Manager</SelectItem>\n                          <SelectItem value=\"Admin\">Admin</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div>\n                      <Label htmlFor=\"role\">Role</Label>\n                      <Select\n                        value={newUser.role}\n                        onValueChange={(value) => setNewUser(p => ({ ...p, role: value as UserRole }))}\n                      >\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select role\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"admin\">Admin</SelectItem>\n                          <SelectItem value=\"manager\">Manager</SelectItem>\n                          <SelectItem value=\"data_collector\">Data Collector</SelectItem>\n                          <SelectItem value=\"viewer\">Viewer</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    {/* Region selectors based on position */}\n                    {['DFO', 'Ranger', 'Guard'].includes(newUser.position) && (\n                      <div>\n                        <Label>Division</Label>\n                        <Select\n                          value={newUser.division_id || ''}\n                          onValueChange={(value) => setNewUser(p => ({ ...p, division_id: value }))}\n                          disabled={divisions.length === 0}\n                        >\n                          <SelectTrigger>\n                            <SelectValue placeholder={\n                              divisions.length === 0 ? 'Loading divisions...' : 'Select division'\n                            } />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {divisions.map(div => (\n                              <SelectItem key={div.id} value={div.id}>\n                                {div.name}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    )}\n                    {['Ranger', 'Guard'].includes(newUser.position) && newUser.division_id && (\n                      <div>\n                        <div className=\"flex items-center justify-between\">\n                          <Label>Range</Label>\n                          {isLoadingRanges && (\n                            <span className=\"text-xs text-blue-600 flex items-center\">\n                              <Loader2 className=\"h-3 w-3 mr-1 animate-spin\" />\n                              Loading...\n                            </span>\n                          )}\n                        </div>\n                        <Select\n                          value={newUser.range_id || ''}\n                          onValueChange={(value) => setNewUser(p => ({ ...p, range_id: value }))}\n                          disabled={isLoadingRanges || rangesError !== null}\n                        >\n                          <SelectTrigger className={rangesError ? 'border-red-300' : ''}>\n                            <SelectValue \n                              placeholder={\n                                isLoadingRanges \n                                  ? 'Loading ranges...' \n                                  : rangesError \n                                    ? 'Error loading ranges'\n                                    : 'Select range'\n                              } \n                            />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {rangesError ? (\n                              <div className=\"text-sm text-red-600 p-2\">\n                                {rangesError}\n                              </div>\n                            ) : ranges.length > 0 ? (\n                              ranges.map(range => (\n                                <SelectItem key={range.id} value={range.id}>\n                                  {range.name}\n                                </SelectItem>\n                              ))\n                            ) : (\n                              <div className=\"text-sm text-muted-foreground p-2\">\n                                No ranges found\n                              </div>\n                            )}\n                          </SelectContent>\n                        </Select>\n                        {rangesError && (\n                          <p className=\"text-xs text-red-500 mt-1\">\n                            {rangesError}\n                          </p>\n                        )}\n                      </div>\n                    )}\n                    {newUser.position === 'Guard' && newUser.range_id && (\n                      <div>\n                        <Label>Beat</Label>\n                        <Select\n                          value={newUser.beat_id || ''}\n                          onValueChange={(value) => setNewUser(p => ({ ...p, beat_id: value }))}\n                          disabled={beats.length === 0}\n                        >\n                          <SelectTrigger>\n                            <SelectValue placeholder={\n                              beats.length === 0 ? 'Loading beats...' : 'Select beat'\n                            } />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {beats.map(beat => (\n                              <SelectItem key={beat.id} value={beat.id}>\n                                {beat.name}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n              <DialogFooter className=\"gap-2\">\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  onClick={() => setShowModal(false)}\n                  disabled={isSubmitting}\n                >\n                  Cancel\n                </Button>\n                <Button \n                  type=\"submit\" \n                  className=\"bg-blue-600 hover:bg-blue-700\"\n                  disabled={isSubmitting}\n                >\n                  {isSubmitting ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      Creating...\n                    </>\n                  ) : (\n                    'Create User'\n                  )}\n                </Button>\n              </DialogFooter>\n            </form>\n            </DialogContent>\n          </Dialog>\n    </div>\n  );\n}"],"names":["Pencil","createLucideIcon","Plus","RotateCw","Search","Trash2","TriangleAlert","badgeVariants","cva","Badge","className","variant","props","jsx","cn","usersReducer","state","action","AdminUsers","search","setSearch","useState","showModal","setShowModal","divisions","setDivisions","ranges","setRanges","beats","setBeats","isLoadingRanges","setIsLoadingRanges","rangesError","setRangesError","isSubmitting","setIsSubmitting","user","useAuth","abortControllerRef","useRef","usersState","dispatch","useReducer","newUser","setNewUser","useEffect","isMounted","controller","timer","data","error","supabase","err","toast","fetchRanges","typedData","item","fetchData","useCallback","timeoutId","sessionData","sessionError","response","errorData","_a","responseData","formattedUsers","errorMessage","refreshInterval","handleCreateUser","e","userData","assignments","session","accessToken","text","handleDeleteUser","userToDelete","requestBody","functionUrl","u","filteredUsers","useMemo","searchTerm","jsxs","_","i","AlertTriangle","Button","Loader2","Card","CardHeader","CardTitle","Input","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Label","p","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","div","range","beat","DialogFooter","Fragment"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}