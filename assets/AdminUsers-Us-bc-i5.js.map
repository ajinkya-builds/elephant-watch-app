{"version":3,"file":"AdminUsers-Us-bc-i5.js","sources":["../../src/components/ui/dialog.tsx","../../src/components/ui/badge.tsx","../../src/pages/AdminUsers.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import { useState, useEffect, useReducer, useRef, useMemo } from 'react';\nimport { toast } from 'sonner';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Plus, Pencil, Trash2, Loader2, AlertTriangle, RotateCw, Search } from 'lucide-react';\nimport { useAuth } from '@/contexts/NewAuthContext';\nimport { supabase } from '@/lib/supabaseClient';\nimport { useAndroidTheme } from \"@/theme/AndroidThemeProvider\";\nimport { applyThemeClasses } from \"@/theme/AndroidThemeUtils\";\nimport { cn } from \"@/lib/utils\";\n\ntype UserRole = 'admin' | 'manager' | 'data_collector' | 'viewer';\ntype UserPosition = 'Ranger' | 'DFO' | 'Officer' | 'Guard' | 'Manager' | 'Admin';\n\ninterface User {\n  id: string;\n  auth_id: string;\n  email: string;\n  phone: string | null;\n  first_name: string;\n  last_name: string;\n  role: UserRole;\n  position: UserPosition;\n  is_active: boolean;\n  status: 'active' | 'inactive' | 'pending';\n  created_at: string;\n  updated_at: string;\n  created_by: string;\n}\n\ninterface ExtendedUser extends User {\n  divisions?: Array<{ id: string; name: string }>;\n  ranges?: Array<{ id: string; name: string }>;\n  beats?: Array<{ id: string; name: string }>;\n}\n\ntype UsersState = {\n  users: ExtendedUser[];\n  loading: boolean;\n  error: string | null;\n  lastFetched: number | null;\n};\n\ntype UsersAction =\n  | { type: 'FETCH_START' }\n  | { type: 'FETCH_SUCCESS'; payload: ExtendedUser[] }\n  | { type: 'FETCH_ERROR'; error: string };\n\nfunction usersReducer(state: UsersState, action: UsersAction): UsersState {\n  switch (action.type) {\n    case 'FETCH_START':\n      return { ...state, loading: true, error: null };\n    case 'FETCH_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        error: null,\n        users: action.payload,\n        lastFetched: Date.now(),\n      };\n    case 'FETCH_ERROR':\n      return { ...state, loading: false, error: action.error };\n    default:\n      return state;\n  }\n}\n\nexport default function AdminUsers() {\n  const [search, setSearch] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [newUser, setNewUser] = useState({\n    first_name: '',\n    last_name: '',\n    email: '',\n    role: 'viewer' as UserRole,\n    position: 'Ranger' as UserPosition,\n    password: '',\n  });\n  \n  const { user } = useAuth();\n  const { theme } = useAndroidTheme();\n  const abortControllerRef = useRef<AbortController | null>(null);\n  \n  const [usersState, dispatch] = useReducer(usersReducer, {\n    users: [],\n    loading: true,\n    error: null,\n    lastFetched: null,\n  });\n\n  // Apply Android theme styling\n  const containerClasses = applyThemeClasses(theme, 'bg-background text-onBackground');\n  const headerClasses = applyThemeClasses(theme, 'text-onSurface');\n  const subtitleClasses = applyThemeClasses(theme, 'text-onSurfaceVariant');\n\n  // Fetch users on component mount\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        dispatch({ type: 'FETCH_START' });\n        \n        const { data: users, error } = await supabase\n          .from('users')\n          .select('*')\n          .order('created_at', { ascending: false });\n          \n        if (error) throw error;\n        \n        dispatch({ type: 'FETCH_SUCCESS', payload: users });\n      } catch (error) {\n        console.error('Error fetching users:', error);\n        dispatch({ \n          type: 'FETCH_ERROR', \n          error: error instanceof Error ? error.message : 'Failed to fetch users' \n        });\n      }\n    };\n    \n    fetchUsers();\n    \n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n    };\n  }, []);\n\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n    \n    try {\n      setIsSubmitting(true);\n      \n      // Create user in Auth\n      const { data: authData, error: authError } = await supabase.auth.signUp({\n        email: newUser.email,\n        password: newUser.password,\n        options: {\n          data: {\n            first_name: newUser.first_name,\n            last_name: newUser.last_name,\n          },\n        },\n      });\n      \n      if (authError) throw authError;\n      if (!authData.user) throw new Error('Failed to create user');\n      \n      // Create user in database\n      const { error: dbError } = await supabase\n        .from('users')\n        .insert([\n          {\n            auth_id: authData.user.id,\n            email: newUser.email,\n            first_name: newUser.first_name,\n            last_name: newUser.last_name,\n            role: newUser.role,\n            position: newUser.position,\n            is_active: true,\n            status: 'active',\n            created_by: user.id,\n          },\n        ]);\n        \n      if (dbError) throw dbError;\n      \n      // Refresh users list\n      dispatch({ type: 'FETCH_START' });\n      const { data: users, error: fetchError } = await supabase\n        .from('users')\n        .select('*')\n        .order('created_at', { ascending: false });\n        \n      if (fetchError) throw fetchError;\n      \n      dispatch({ type: 'FETCH_SUCCESS', payload: users });\n      setShowModal(false);\n      setNewUser({\n        first_name: '',\n        last_name: '',\n        email: '',\n        role: 'viewer',\n        position: 'Ranger',\n        password: '',\n      });\n      \n      toast.success('User created successfully');\n    } catch (error) {\n      console.error('Error creating user:', error);\n      toast.error(error instanceof Error ? error.message : 'Failed to create user');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleDeleteUser = async (userToDelete: ExtendedUser) => {\n    if (!window.confirm(`Are you sure you want to delete ${userToDelete.first_name} ${userToDelete.last_name}?`)) {\n      return;\n    }\n    \n    try {\n      setIsSubmitting(true);\n      \n      // Delete user from Auth\n      const { error: authError } = await supabase.auth.admin.deleteUser(userToDelete.auth_id);\n      if (authError) throw authError;\n      \n      // Delete user from database\n      const { error: dbError } = await supabase\n        .from('users')\n        .delete()\n        .eq('id', userToDelete.id);\n        \n      if (dbError) throw dbError;\n      \n      // Update UI\n      dispatch({\n        type: 'FETCH_SUCCESS',\n        payload: usersState.users.filter(u => u.id !== userToDelete.id)\n      });\n      \n      toast.success('User deleted successfully');\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      toast.error(error instanceof Error ? error.message : 'Failed to delete user');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Filter users based on search\n  const filteredUsers = useMemo(() => {\n    if (!search) return usersState.users;\n    \n    const searchTerm = search.toLowerCase();\n    return usersState.users.filter(u => \n      u.first_name.toLowerCase().includes(searchTerm) ||\n      u.last_name.toLowerCase().includes(searchTerm) ||\n      u.email.toLowerCase().includes(searchTerm) ||\n      `${u.first_name} ${u.last_name}`.toLowerCase().includes(searchTerm)\n    );\n  }, [usersState.users, search]);\n\n  // Loading state\n  if (usersState.loading && usersState.users.length === 0) {\n    return (\n      <div className={cn(\"flex items-center justify-center min-h-screen\", containerClasses)}>\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  // Error state\n  if (usersState.error) {\n    return (\n      <div className={cn(\"p-4\", containerClasses)}>\n        <div className={cn(\"border p-4 rounded-lg\", applyThemeClasses(theme, 'bg-errorContainer text-onErrorContainer border-error'))}>\n          <div className=\"flex items-center\">\n            <AlertTriangle className=\"w-5 h-5 mr-2\" />\n            <span>Error: {usersState.error}</span>\n          </div>\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            className={cn(\"mt-2\", applyThemeClasses(theme, 'text-onErrorContainer border-onErrorContainer hover:bg-error/10'))}\n            onClick={() => window.location.reload()}\n          >\n            <RotateCw className=\"mr-2 h-4 w-4\" />\n            Retry\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn(\"min-h-screen p-6\", containerClasses)}>\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <div>\n            <h1 className={cn(theme.typography.headlineLarge, headerClasses)}>\n              User Management\n            </h1>\n            <p className={cn(theme.typography.bodyLarge, subtitleClasses)}>\n              Manage application users and their permissions\n            </p>\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                type=\"search\"\n                placeholder=\"Search users...\"\n                className=\"pl-10 w-64\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n              />\n            </div>\n            <Button onClick={() => setShowModal(true)}>\n              <Plus className=\"mr-2 h-4 w-4\" /> Add User\n            </Button>\n          </div>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Users</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Name</TableHead>\n                  <TableHead>Email</TableHead>\n                  <TableHead>Role</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredUsers.map((user) => (\n                  <TableRow key={user.id}>\n                    <TableCell className=\"font-medium\">{user.first_name} {user.last_name}</TableCell>\n                    <TableCell>{user.email}</TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\" className=\"capitalize\">\n                        {user.role}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant={user.status === 'active' ? 'default' : 'secondary'}>\n                        {user.status}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex justify-end space-x-2\">\n                        <Button variant=\"ghost\" size=\"icon\">\n                          <Pencil className=\"h-4 w-4\" />\n                        </Button>\n                        <Button \n                          variant=\"ghost\" \n                          size=\"icon\"\n                          className=\"text-destructive hover:text-destructive\"\n                          onClick={() => handleDeleteUser(user)}\n                          disabled={isSubmitting}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Dialog open={showModal} onOpenChange={setShowModal}>\n        <DialogContent className=\"sm:max-w-[500px]\">\n          <DialogHeader>\n            <DialogTitle>Add New User</DialogTitle>\n            <DialogDescription>\n              Create a new user account. The user will receive an email to set their password.\n            </DialogDescription>\n          </DialogHeader>\n          <form onSubmit={handleCreateUser}>\n            <div className=\"grid gap-4 py-4\">\n              <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"first_name\" className=\"text-right\">\n                  First Name\n                </Label>\n                <Input\n                  id=\"first_name\"\n                  className=\"col-span-3\"\n                  value={newUser.first_name}\n                  onChange={(e) => setNewUser({...newUser, first_name: e.target.value})}\n                  required\n                />\n              </div>\n              <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"last_name\" className=\"text-right\">\n                  Last Name\n                </Label>\n                <Input\n                  id=\"last_name\"\n                  className=\"col-span-3\"\n                  value={newUser.last_name}\n                  onChange={(e) => setNewUser({...newUser, last_name: e.target.value})}\n                  required\n                />\n              </div>\n              <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"email\" className=\"text-right\">\n                  Email\n                </Label>\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  className=\"col-span-3\"\n                  value={newUser.email}\n                  onChange={(e) => setNewUser({...newUser, email: e.target.value})}\n                  required\n                />\n              </div>\n              <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"password\" className=\"text-right\">\n                  Password\n                </Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  className=\"col-span-3\"\n                  value={newUser.password}\n                  onChange={(e) => setNewUser({...newUser, password: e.target.value})}\n                  required\n                  minLength={6}\n                />\n              </div>\n              <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"role\" className=\"text-right\">\n                  Role\n                </Label>\n                <Select\n                  value={newUser.role}\n                  onValueChange={(value) => setNewUser({...newUser, role: value as UserRole})}\n                >\n                  <SelectTrigger className=\"col-span-3\">\n                    <SelectValue placeholder=\"Select a role\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"admin\">Admin</SelectItem>\n                    <SelectItem value=\"manager\">Manager</SelectItem>\n                    <SelectItem value=\"data_collector\">Data Collector</SelectItem>\n                    <SelectItem value=\"viewer\">Viewer</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"position\" className=\"text-right\">\n                  Position\n                </Label>\n                <Select\n                  value={newUser.position}\n                  onValueChange={(value) => setNewUser({...newUser, position: value as UserPosition})}\n                >\n                  <SelectTrigger className=\"col-span-3\">\n                    <SelectValue placeholder=\"Select a position\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Admin\">Admin</SelectItem>\n                    <SelectItem value=\"Manager\">Manager</SelectItem>\n                    <SelectItem value=\"DFO\">DFO</SelectItem>\n                    <SelectItem value=\"Officer\">Officer</SelectItem>\n                    <SelectItem value=\"Ranger\">Ranger</SelectItem>\n                    <SelectItem value=\"Guard\">Guard</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            <DialogFooter>\n              <Button \n                type=\"button\" \n                variant=\"outline\"\n                onClick={() => setShowModal(false)}\n                disabled={isSubmitting}\n              >\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={isSubmitting}>\n                {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                {isSubmitting ? 'Creating...' : 'Create User'}\n              </Button>\n            </DialogFooter>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n"],"names":["Dialog","DialogPrimitive.Root","DialogPortal","DialogPrimitive.Portal","DialogOverlay","React.forwardRef","className","props","ref","jsx","DialogPrimitive.Overlay","cn","DialogContent","children","jsxs","DialogPrimitive.Content","DialogPrimitive.Close","X","DialogHeader","DialogFooter","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","badgeVariants","cva","Badge","variant","usersReducer","state","action","AdminUsers","search","setSearch","useState","showModal","setShowModal","isSubmitting","setIsSubmitting","newUser","setNewUser","user","useAuth","theme","useAndroidTheme","abortControllerRef","useRef","usersState","dispatch","useReducer","containerClasses","applyThemeClasses","headerClasses","subtitleClasses","useEffect","users","error","supabase","handleCreateUser","e","authData","authError","dbError","fetchError","toast","handleDeleteUser","userToDelete","u","filteredUsers","useMemo","searchTerm","Loader2","AlertTriangle","Button","RotateCw","Search","Input","Plus","Card","CardHeader","CardTitle","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","Pencil","Trash2","Label","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem"],"mappings":"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"}