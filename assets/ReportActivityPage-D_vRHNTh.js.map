{"version":3,"file":"ReportActivityPage-D_vRHNTh.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/camera.js","../../../node_modules/lucide-react/dist/esm/icons/compass.js","../../../node_modules/lucide-react/dist/esm/icons/lock-open.js","../../../node_modules/lucide-react/dist/esm/icons/lock.js","../../../node_modules/lucide-react/dist/esm/icons/navigation.js","../../../node_modules/lucide-react/dist/esm/icons/upload.js","../../../node_modules/@radix-ui/react-progress/dist/index.mjs","../../src/components/ui/progress.tsx","../../src/contexts/ActivityFormContext.tsx","../../src/hooks/useGeolocation.ts","../../src/components/form-steps/DateTimeLocationStep.tsx","../../../node_modules/@radix-ui/react-radio-group/dist/index.mjs","../../src/components/ui/radio-group.tsx","../../src/components/ui/CrossPlatformSelect.tsx","../../src/components/ui/StepperSelect.tsx","../../src/components/form-steps/ObservationTypeStep.tsx","../../src/components/form-steps/CompassBearingStep.tsx","../../src/components/form-steps/PhotoStep.tsx","../../src/utils/platform.ts","../../src/utils/networkStatus.ts","../../src/components/SyncStatus.tsx","../../src/components/ActivityReportStepper.tsx","../../src/components/ui/alert.tsx","../../src/pages/ReportActivityPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Camera = createLucideIcon(\"Camera\", [\n  [\n    \"path\",\n    {\n      d: \"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z\",\n      key: \"1tc9qg\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"13\", r: \"3\", key: \"1vg3eu\" }]\n]);\n\nexport { Camera as default };\n//# sourceMappingURL=camera.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Compass = createLucideIcon(\"Compass\", [\n  [\n    \"path\",\n    {\n      d: \"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z\",\n      key: \"9ktpf1\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Compass as default };\n//# sourceMappingURL=compass.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LockOpen = createLucideIcon(\"LockOpen\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 9.9-1\", key: \"1mm8w8\" }]\n]);\n\nexport { LockOpen as default };\n//# sourceMappingURL=lock-open.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Navigation = createLucideIcon(\"Navigation\", [\n  [\"polygon\", { points: \"3 11 22 2 13 21 11 13 3 11\", key: \"1ltx0t\" }]\n]);\n\nexport { Navigation as default };\n//# sourceMappingURL=navigation.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","\"use client\";\n\n// src/progress.tsx\nimport * as React from \"react\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar PROGRESS_NAME = \"Progress\";\nvar DEFAULT_MAX = 100;\nvar [createProgressContext, createProgressScope] = createContextScope(PROGRESS_NAME);\nvar [ProgressProvider, useProgressContext] = createProgressContext(PROGRESS_NAME);\nvar Progress = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeProgress,\n      value: valueProp = null,\n      max: maxProp,\n      getValueLabel = defaultGetValueLabel,\n      ...progressProps\n    } = props;\n    if ((maxProp || maxProp === 0) && !isValidMaxNumber(maxProp)) {\n      console.error(getInvalidMaxError(`${maxProp}`, \"Progress\"));\n    }\n    const max = isValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\n    if (valueProp !== null && !isValidValueNumber(valueProp, max)) {\n      console.error(getInvalidValueError(`${valueProp}`, \"Progress\"));\n    }\n    const value = isValidValueNumber(valueProp, max) ? valueProp : null;\n    const valueLabel = isNumber(value) ? getValueLabel(value, max) : void 0;\n    return /* @__PURE__ */ jsx(ProgressProvider, { scope: __scopeProgress, value, max, children: /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"aria-valuemax\": max,\n        \"aria-valuemin\": 0,\n        \"aria-valuenow\": isNumber(value) ? value : void 0,\n        \"aria-valuetext\": valueLabel,\n        role: \"progressbar\",\n        \"data-state\": getProgressState(value, max),\n        \"data-value\": value ?? void 0,\n        \"data-max\": max,\n        ...progressProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nProgress.displayName = PROGRESS_NAME;\nvar INDICATOR_NAME = \"ProgressIndicator\";\nvar ProgressIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeProgress, ...indicatorProps } = props;\n    const context = useProgressContext(INDICATOR_NAME, __scopeProgress);\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": getProgressState(context.value, context.max),\n        \"data-value\": context.value ?? void 0,\n        \"data-max\": context.max,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nProgressIndicator.displayName = INDICATOR_NAME;\nfunction defaultGetValueLabel(value, max) {\n  return `${Math.round(value / max * 100)}%`;\n}\nfunction getProgressState(value, maxValue) {\n  return value == null ? \"indeterminate\" : value === maxValue ? \"complete\" : \"loading\";\n}\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\nfunction isValidMaxNumber(max) {\n  return isNumber(max) && !isNaN(max) && max > 0;\n}\nfunction isValidValueNumber(value, max) {\n  return isNumber(value) && !isNaN(value) && value <= max && value >= 0;\n}\nfunction getInvalidMaxError(propValue, componentName) {\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`${DEFAULT_MAX}\\`.`;\n}\nfunction getInvalidValueError(propValue, componentName) {\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be:\n  - a positive number\n  - less than the value passed to \\`max\\` (or ${DEFAULT_MAX} if no \\`max\\` prop is set)\n  - \\`null\\` or \\`undefined\\` if the progress is indeterminate.\n\nDefaulting to \\`null\\`.`;\n}\nvar Root = Progress;\nvar Indicator = ProgressIndicator;\nexport {\n  Indicator,\n  Progress,\n  ProgressIndicator,\n  Root,\n  createProgressScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-800\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","import React, { createContext, useContext, useState, ReactNode } from 'react';\nimport { ActivityReport, ObservationType, IndirectSightingType, LossType } from '@/types/activity-report';\n\nexport type FormStep = 'dateTimeLocation' | 'observationType' | 'compassBearing' | 'photo';\n\ninterface ActivityFormData {\n  activity_date: string | Date | null;\n  activity_time: string | null;\n  observation_type: string | null;\n  latitude: number | null;\n  longitude: number | null;\n  total_elephants: number | null;\n  male_elephants: number | null;\n  female_elephants: number | null;\n  unknown_elephants: number | null;\n  calves: number | null;\n  indirect_sighting_type: string | null;\n  loss_type: string | null;\n  compass_bearing: number | null;\n  photo_url: string | null;\n  distance: number | null;\n  distance_unit: 'meters' | 'feet' | null;\n  description: string | null;\n}\n\ninterface ActivityFormContextType {\n  currentStep: FormStep;\n  formData: ActivityFormData;\n  goToNextStep: () => void;\n  goToPreviousStep: () => void;\n  updateFormData: (data: Partial<ActivityFormData>) => void;\n  isStepValid: (step: FormStep) => boolean;\n  isLastStep: () => boolean;\n  resetForm: () => void;\n}\n\nconst initialFormData: ActivityFormData = {\n  activity_date: null,\n  activity_time: null,\n  observation_type: null,\n  latitude: null,\n  longitude: null,\n  total_elephants: null,\n  male_elephants: null,\n  female_elephants: null,\n  unknown_elephants: null,\n  calves: null,\n  indirect_sighting_type: null,\n  loss_type: null,\n  compass_bearing: null,\n  photo_url: null,\n  distance: null,\n  distance_unit: null,\n  description: null,\n};\n\nconst ActivityFormContext = createContext<ActivityFormContextType | undefined>(undefined);\n\nexport function ActivityFormProvider({ children }: { children: ReactNode }) {\n  const [currentStep, setCurrentStep] = useState<FormStep>('dateTimeLocation');\n  const [formData, setFormData] = useState<ActivityFormData>(initialFormData);\n\n  const steps: FormStep[] = ['dateTimeLocation', 'observationType', 'compassBearing', 'photo'];\n\n  const goToNextStep = () => {\n    const currentIndex = steps.indexOf(currentStep);\n    if (currentIndex < steps.length - 1) {\n      setCurrentStep(steps[currentIndex + 1]);\n    }\n  };\n\n  const goToPreviousStep = () => {\n    const currentIndex = steps.indexOf(currentStep);\n    if (currentIndex > 0) {\n      setCurrentStep(steps[currentIndex - 1]);\n    }\n  };\n\n  const updateFormData = (data: Partial<ActivityFormData>) => {\n    setFormData(prev => ({ ...prev, ...data }));\n  };\n\n  const isStepValid = (step: FormStep): boolean => {\n    switch (step) {\n      case 'dateTimeLocation':\n        return !!formData.activity_date && !!formData.activity_time && \n               formData.latitude !== null && formData.longitude !== null;\n      case 'observationType':\n        return !!formData.observation_type;\n      case 'compassBearing':\n        return formData.compass_bearing !== null;\n      case 'photo':\n        return true; // Photo is optional\n      default:\n        return false;\n    }\n  };\n\n  const isLastStep = () => {\n    return currentStep === steps[steps.length - 1];\n  };\n\n  const resetForm = () => {\n    setFormData(initialFormData);\n    setCurrentStep('dateTimeLocation');\n  };\n\n  return (\n    <ActivityFormContext.Provider\n      value={{\n        currentStep,\n        formData,\n        goToNextStep,\n        goToPreviousStep,\n        updateFormData,\n        isStepValid,\n        isLastStep,\n        resetForm,\n      }}\n    >\n      {children}\n    </ActivityFormContext.Provider>\n  );\n}\n\nexport function useActivityForm() {\n  const context = useContext(ActivityFormContext);\n  if (context === undefined) {\n    throw new Error('useActivityForm must be used within an ActivityFormProvider');\n  }\n  return context;\n} ","import { useState, useEffect } from 'react';\n\ninterface GeolocationState {\n  latitude: number | null;\n  longitude: number | null;\n  error: string | null;\n}\n\nexport const useGeolocation = () => {\n  const [state, setState] = useState<GeolocationState>({\n    latitude: null,\n    longitude: null,\n    error: null\n  });\n\n  useEffect(() => {\n    if (!navigator.geolocation) {\n      setState(prev => ({\n        ...prev,\n        error: 'Geolocation is not supported by your browser'\n      }));\n      return;\n    }\n\n    const successHandler = (position: GeolocationPosition) => {\n      setState({\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        error: null\n      });\n    };\n\n    const errorHandler = (error: GeolocationPositionError) => {\n      setState(prev => ({\n        ...prev,\n        error: error.message\n      }));\n    };\n\n    navigator.geolocation.getCurrentPosition(\n      successHandler,\n      errorHandler,\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      }\n    );\n  }, []);\n\n  return state;\n}; ","import React, { useEffect } from 'react';\nimport { useActivityForm } from '@/contexts/ActivityFormContext';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useGeolocation } from '@/hooks/useGeolocation';\n\nexport function DateTimeLocationStep() {\n  const { formData, updateFormData } = useActivityForm();\n  const { latitude, longitude, error: geoError } = useGeolocation();\n\n  useEffect(() => {\n    if (latitude && longitude) {\n      updateFormData({ latitude, longitude });\n    }\n  }, [latitude, longitude, updateFormData]);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"space-y-4\">\n        <div>\n          <Label htmlFor=\"activity_date\">Date</Label>\n          <Input\n            id=\"activity_date\"\n            type=\"date\"\n            value={formData.activity_date instanceof Date \n              ? formData.activity_date.toISOString().split('T')[0]\n              : formData.activity_date || ''}\n            onChange={(e) => updateFormData({ activity_date: e.target.value })}\n            required\n          />\n        </div>\n\n        <div>\n          <Label htmlFor=\"activity_time\">Time</Label>\n          <Input\n            id=\"activity_time\"\n            type=\"time\"\n            value={formData.activity_time || ''}\n            onChange={(e) => updateFormData({ activity_time: e.target.value })}\n            required\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label>Location</Label>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"latitude\" className=\"text-sm text-gray-500\">Latitude</Label>\n              <Input\n                id=\"latitude\"\n                type=\"number\"\n                step=\"any\"\n                value={formData.latitude || ''}\n                onChange={(e) => updateFormData({ latitude: parseFloat(e.target.value) })}\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"longitude\" className=\"text-sm text-gray-500\">Longitude</Label>\n              <Input\n                id=\"longitude\"\n                type=\"number\"\n                step=\"any\"\n                value={formData.longitude || ''}\n                onChange={(e) => updateFormData({ longitude: parseFloat(e.target.value) })}\n                required\n              />\n            </div>\n          </div>\n          {geoError && (\n            <p className=\"text-sm text-red-500 mt-1\">\n              Error getting location: {geoError}\n            </p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n} ","\"use client\";\n\n// src/radio-group.tsx\nimport * as React2 from \"react\";\nimport { composeEventHandlers as composeEventHandlers2 } from \"@radix-ui/primitive\";\nimport { useComposedRefs as useComposedRefs2 } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope as createContextScope2 } from \"@radix-ui/react-context\";\nimport { Primitive as Primitive2 } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\n\n// src/radio.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar RADIO_NAME = \"Radio\";\nvar [createRadioContext, createRadioScope] = createContextScope(RADIO_NAME);\nvar [RadioProvider, useRadioContext] = createRadioContext(RADIO_NAME);\nvar Radio = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadio,\n      name,\n      checked = false,\n      required,\n      disabled,\n      value = \"on\",\n      onCheck,\n      form,\n      ...radioProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    return /* @__PURE__ */ jsxs(RadioProvider, { scope: __scopeRadio, checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"radio\",\n          \"aria-checked\": checked,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...radioProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            if (!checked) onCheck?.();\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        RadioBubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nRadio.displayName = RADIO_NAME;\nvar INDICATOR_NAME = \"RadioIndicator\";\nvar RadioIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadio, forceMount, ...indicatorProps } = props;\n    const context = useRadioContext(INDICATOR_NAME, __scopeRadio);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.checked, children: /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...indicatorProps,\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nRadioIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"RadioBubbleInput\";\nvar RadioBubbleInput = React.forwardRef(\n  ({\n    __scopeRadio,\n    control,\n    checked,\n    bubbles = true,\n    ...props\n  }, forwardedRef) => {\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"radio\",\n        \"aria-hidden\": true,\n        defaultChecked: checked,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0\n        }\n      }\n    );\n  }\n);\nRadioBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\n\n// src/radio-group.tsx\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nvar ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"];\nvar RADIO_GROUP_NAME = \"RadioGroup\";\nvar [createRadioGroupContext, createRadioGroupScope] = createContextScope2(RADIO_GROUP_NAME, [\n  createRovingFocusGroupScope,\n  createRadioScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar useRadioScope = createRadioScope();\nvar [RadioGroupProvider, useRadioGroupContext] = createRadioGroupContext(RADIO_GROUP_NAME);\nvar RadioGroup = React2.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRadioGroup,\n      name,\n      defaultValue,\n      value: valueProp,\n      required = false,\n      disabled = false,\n      orientation,\n      dir,\n      loop = true,\n      onValueChange,\n      ...groupProps\n    } = props;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      defaultProp: defaultValue ?? null,\n      onChange: onValueChange,\n      caller: RADIO_GROUP_NAME\n    });\n    return /* @__PURE__ */ jsx2(\n      RadioGroupProvider,\n      {\n        scope: __scopeRadioGroup,\n        name,\n        required,\n        disabled,\n        value,\n        onValueChange: setValue,\n        children: /* @__PURE__ */ jsx2(\n          RovingFocusGroup.Root,\n          {\n            asChild: true,\n            ...rovingFocusGroupScope,\n            orientation,\n            dir: direction,\n            loop,\n            children: /* @__PURE__ */ jsx2(\n              Primitive2.div,\n              {\n                role: \"radiogroup\",\n                \"aria-required\": required,\n                \"aria-orientation\": orientation,\n                \"data-disabled\": disabled ? \"\" : void 0,\n                dir: direction,\n                ...groupProps,\n                ref: forwardedRef\n              }\n            )\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroup.displayName = RADIO_GROUP_NAME;\nvar ITEM_NAME = \"RadioGroupItem\";\nvar RadioGroupItem = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, disabled, ...itemProps } = props;\n    const context = useRadioGroupContext(ITEM_NAME, __scopeRadioGroup);\n    const isDisabled = context.disabled || disabled;\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeRadioGroup);\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    const ref = React2.useRef(null);\n    const composedRefs = useComposedRefs2(forwardedRef, ref);\n    const checked = context.value === itemProps.value;\n    const isArrowKeyPressedRef = React2.useRef(false);\n    React2.useEffect(() => {\n      const handleKeyDown = (event) => {\n        if (ARROW_KEYS.includes(event.key)) {\n          isArrowKeyPressedRef.current = true;\n        }\n      };\n      const handleKeyUp = () => isArrowKeyPressedRef.current = false;\n      document.addEventListener(\"keydown\", handleKeyDown);\n      document.addEventListener(\"keyup\", handleKeyUp);\n      return () => {\n        document.removeEventListener(\"keydown\", handleKeyDown);\n        document.removeEventListener(\"keyup\", handleKeyUp);\n      };\n    }, []);\n    return /* @__PURE__ */ jsx2(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !isDisabled,\n        active: checked,\n        children: /* @__PURE__ */ jsx2(\n          Radio,\n          {\n            disabled: isDisabled,\n            required: context.required,\n            checked,\n            ...radioScope,\n            ...itemProps,\n            name: context.name,\n            ref: composedRefs,\n            onCheck: () => context.onValueChange(itemProps.value),\n            onKeyDown: composeEventHandlers2((event) => {\n              if (event.key === \"Enter\") event.preventDefault();\n            }),\n            onFocus: composeEventHandlers2(itemProps.onFocus, () => {\n              if (isArrowKeyPressedRef.current) ref.current?.click();\n            })\n          }\n        )\n      }\n    );\n  }\n);\nRadioGroupItem.displayName = ITEM_NAME;\nvar INDICATOR_NAME2 = \"RadioGroupIndicator\";\nvar RadioGroupIndicator = React2.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeRadioGroup, ...indicatorProps } = props;\n    const radioScope = useRadioScope(__scopeRadioGroup);\n    return /* @__PURE__ */ jsx2(RadioIndicator, { ...radioScope, ...indicatorProps, ref: forwardedRef });\n  }\n);\nRadioGroupIndicator.displayName = INDICATOR_NAME2;\nvar Root2 = RadioGroup;\nvar Item2 = RadioGroupItem;\nvar Indicator = RadioGroupIndicator;\nexport {\n  Indicator,\n  Item2 as Item,\n  RadioGroup,\n  RadioGroupIndicator,\n  RadioGroupItem,\n  Root2 as Root,\n  createRadioGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","import React, { forwardRef } from \"react\";\nimport { isAndroid } from \"@/lib/isAndroidWebView\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"./select\";\nimport { cn } from '@/lib/utils';\n\ninterface Option {\n  value: string;\n  label: string;\n}\n\ninterface CrossPlatformSelectProps {\n  value: string | undefined;\n  onChange: (value: string) => void;\n  options: Option[];\n  placeholder?: string;\n  className?: string;\n}\n\nconst CrossPlatformSelect = forwardRef<HTMLSelectElement, CrossPlatformSelectProps>(\n  ({ value, onChange, options, placeholder, className }, ref) => {\n    if (isAndroid()) {\n      return (\n        <select\n          value={value || \"\"}\n          onChange={e => onChange(e.target.value)}\n          className={cn(\n            'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n            className\n          )}\n          ref={ref}\n          style={{\n            WebkitAppearance: 'none',\n            MozAppearance: 'none',\n            width: \"100%\",\n            minHeight: 48,\n            fontSize: 16,\n            border: \"2px solid #1976d2\",\n            borderRadius: 6,\n            background: \"#fff\",\n            color: \"#222\",\n            margin: \"8px 0\",\n            padding: \"8px 12px\",\n            appearance: \"auto\",\n            boxShadow: \"0 0 0 2px #1976d2 inset\"\n          }}\n        >\n          <option value=\"\">{placeholder || \"Select an option\"}</option>\n          {options.map(opt => (\n            <option key={opt.value} value={opt.value}>\n              {opt.label}\n            </option>\n          ))}\n        </select>\n      );\n    }\n\n    return (\n      <Select value={value} onValueChange={onChange}>\n        <SelectTrigger className={className || \"w-full h-12 text-base\"}>\n          <SelectValue placeholder={placeholder || \"Select an option\"} />\n        </SelectTrigger>\n        <SelectContent>\n          {options.map(opt => (\n            <SelectItem key={opt.value} value={opt.value}>\n              {opt.label}\n            </SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n    );\n  }\n);\n\nCrossPlatformSelect.displayName = 'CrossPlatformSelect';\n\nexport { CrossPlatformSelect }; ","import React from \"react\";\nimport { isAndroid } from \"@/lib/isAndroidWebView\";\nimport { CrossPlatformSelect } from \"./CrossPlatformSelect\";\n\n// Simple native select for Android WebView\nfunction SimpleSelect({ value, onChange, options, placeholder, className }: any) {\n  return (\n    <select\n      value={value || \"\"}\n      onChange={e => onChange(e.target.value)}\n      className={className || \"w-full h-12 text-base border rounded\"}\n      style={{\n        width: \"100%\",\n        minHeight: 48,\n        fontSize: 16,\n        border: \"1px solid #ccc\",\n        borderRadius: 6,\n        background: \"#fff\",\n        color: \"#222\",\n        margin: \"8px 0\",\n        padding: \"8px 12px\",\n      }}\n    >\n      <option value=\"\">{placeholder || \"Select an option\"}</option>\n      {options.map((opt: any) => (\n        <option key={opt.value} value={opt.value}>\n          {opt.label}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nexport interface OptionType {\n  value: string;\n  label: string;\n}\n\ninterface StepperSelectProps {\n  options: OptionType[];\n  value: string | undefined;\n  onChange: (value: string) => void;\n  placeholder?: string;\n  className?: string;\n}\n\nexport const StepperSelect: React.FC<StepperSelectProps> = ({\n  options,\n  value,\n  onChange,\n  placeholder,\n  className,\n}) => {\n  if (isAndroid()) {\n    return (\n      <SimpleSelect\n        options={options}\n        value={value}\n        onChange={onChange}\n        placeholder={placeholder}\n        className={className}\n      />\n    );\n  }\n  return (\n    <CrossPlatformSelect\n      options={options}\n      value={value}\n      onChange={onChange}\n      placeholder={placeholder}\n      className={className}\n    />\n  );\n}; ","import React, { useCallback, useMemo } from 'react';\nimport { useActivityForm } from '@/contexts/ActivityFormContext';\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport debounce from 'lodash/debounce';\nimport { CrossPlatformSelect } from \"@/components/ui/CrossPlatformSelect\";\nimport { StepperSelect, OptionType } from \"@/components/ui/StepperSelect\";\nimport { isAndroid } from '@/lib/isAndroidWebView';\nimport { ObservationType, IndirectSightingType, LossType } from '@/types/activity-report';\n\nconst observationTypes: { value: ObservationType; label: string }[] = [\n  { value: 'direct', label: 'Direct Sighting' },\n  { value: 'indirect', label: 'Indirect Sighting' },\n  { value: 'loss', label: 'Loss Report' }\n];\n\nconst indirectSightingTypes: { value: IndirectSightingType; label: string }[] = [\n  { value: 'Pugmark', label: 'Pugmark' },\n  { value: 'Dung', label: 'Dung' },\n  { value: 'Broken Branches', label: 'Broken Branches' },\n  { value: 'Sound', label: 'Sound' },\n  { value: 'Eyewitness', label: 'Eyewitness' }\n];\n\nconst lossTypes: { value: LossType; label: string }[] = [\n  { value: 'No loss', label: 'No Loss' },\n  { value: 'crop', label: 'Crop Damage' },\n  { value: 'livestock', label: 'Livestock Loss' },\n  { value: 'property', label: 'Property Damage' },\n  { value: 'fencing', label: 'Fencing Damage' },\n  { value: 'solar panels', label: 'Solar Panel Damage' },\n  { value: 'FD establishment', label: 'FD Establishment Damage' },\n  { value: 'Other', label: 'Other Loss' }\n];\n\nexport const ObservationTypeStep: React.FC = () => {\n  const { formData, updateFormData } = useActivityForm();\n\n  const handleObservationTypeChange = (value: ObservationType) => {\n    updateFormData({ observation_type: value });\n  };\n\n  const handleIndirectSightingTypeChange = (value: IndirectSightingType) => {\n    updateFormData({ indirect_sighting_type: value });\n  };\n\n  const handleLossTypeChange = (value: LossType) => {\n    updateFormData({ loss_type: value });\n  };\n\n  // Debounced handlers for number inputs\n  const debouncedSetFormData = useMemo(\n    () => debounce((updates: Partial<typeof formData>) => {\n      updateFormData(updates);\n    }, 300),\n    [updateFormData]\n  );\n\n  const handleNumberChange = useCallback((field: string, value: string) => {\n    const num = parseInt(value);\n    if (!isNaN(num) && num >= 0) {\n      debouncedSetFormData({ [field]: num });\n    }\n  }, [debouncedSetFormData]);\n\n  const handleSelectChange = useCallback((field: string, value: string) => {\n    updateFormData({ [field]: value });\n  }, [updateFormData]);\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"space-y-4\">\n            <div>\n              <Label>Type of Observation</Label>\n              <RadioGroup\n                value={formData.observation_type}\n                onValueChange={handleObservationTypeChange}\n                className=\"mt-2\"\n              >\n                {observationTypes.map((type) => (\n                  <div key={type.value} className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value={type.value} id={type.value} />\n                    <Label htmlFor={type.value}>{type.label}</Label>\n                  </div>\n                ))}\n              </RadioGroup>\n            </div>\n\n            {formData.observation_type === 'indirect' && (\n              <div>\n                <Label>Indirect Sighting Type</Label>\n                <RadioGroup\n                  value={formData.indirect_sighting_type}\n                  onValueChange={handleIndirectSightingTypeChange}\n                  className=\"mt-2\"\n                >\n                  {indirectSightingTypes.map((type) => (\n                    <div key={type.value} className=\"flex items-center space-x-2\">\n                      <RadioGroupItem value={type.value} id={type.value} />\n                      <Label htmlFor={type.value}>{type.label}</Label>\n                    </div>\n                  ))}\n                </RadioGroup>\n              </div>\n            )}\n\n            {formData.observation_type === 'loss' && (\n              <div>\n                <Label>Loss Type</Label>\n                <RadioGroup\n                  value={formData.loss_type}\n                  onValueChange={handleLossTypeChange}\n                  className=\"mt-2\"\n                >\n                  {lossTypes.map((type) => (\n                    <div key={type.value} className=\"flex items-center space-x-2\">\n                      <RadioGroupItem value={type.value} id={type.value} />\n                      <Label htmlFor={type.value}>{type.label}</Label>\n                    </div>\n                  ))}\n                </RadioGroup>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {formData.observation_type === 'direct' && (\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"total_elephants\">Total Elephants</Label>\n                <Input\n                  type=\"number\"\n                  id=\"total_elephants\"\n                  min=\"0\"\n                  value={formData.total_elephants || ''}\n                  onChange={(e) => handleNumberChange('total_elephants', e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"male_elephants\">Male Elephants</Label>\n                <Input\n                  type=\"number\"\n                  id=\"male_elephants\"\n                  min=\"0\"\n                  value={formData.male_elephants || ''}\n                  onChange={(e) => handleNumberChange('male_elephants', e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"female_elephants\">Female Elephants</Label>\n                <Input\n                  type=\"number\"\n                  id=\"female_elephants\"\n                  min=\"0\"\n                  value={formData.female_elephants || ''}\n                  onChange={(e) => handleNumberChange('female_elephants', e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"unknown_elephants\">Unknown Elephants</Label>\n                <Input\n                  type=\"number\"\n                  id=\"unknown_elephants\"\n                  min=\"0\"\n                  value={formData.unknown_elephants || ''}\n                  onChange={(e) => handleNumberChange('unknown_elephants', e.target.value)}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"calves\">Calves</Label>\n                <Input\n                  type=\"number\"\n                  id=\"calves\"\n                  min=\"0\"\n                  value={formData.calves || ''}\n                  onChange={(e) => handleNumberChange('calves', e.target.value)}\n                />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {formData.observation_type === 'indirect' && (\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"indirect_sighting_type\">Type of Indirect Sighting</Label>\n              <Select\n                value={formData.indirect_sighting_type || ''}\n                onValueChange={value => handleSelectChange('indirect_sighting_type', value)}\n              >\n                <SelectTrigger className=\"w-full bg-white border-gray-200 shadow-sm hover:border-blue-500 transition-colors\">\n                  <SelectValue placeholder=\"Select type of indirect sighting\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Pugmark\">Pugmark</SelectItem>\n                  <SelectItem value=\"Dung\">Dung</SelectItem>\n                  <SelectItem value=\"Broken Branches\">Broken Branches</SelectItem>\n                  <SelectItem value=\"Sound\">Sound</SelectItem>\n                  <SelectItem value=\"Eyewitness\">Eyewitness</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {formData.observation_type === 'loss' && (\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"loss_type\">Type of Loss</Label>\n              {isAndroid() ? (\n                <select\n                  id=\"loss_type\"\n                  value={formData.loss_type ?? undefined}\n                  onChange={e => handleSelectChange('loss_type', e.target.value)}\n                  className=\"w-full h-12 text-base border rounded\"\n                >\n                  <option value=\"\">Select type of loss</option>\n                  <option value=\"No loss\">No loss</option>\n                  <option value=\"crop\">Crop</option>\n                  <option value=\"livestock\">Livestock</option>\n                  <option value=\"property\">Property</option>\n                  <option value=\"fencing\">Fencing</option>\n                  <option value=\"solar panels\">Solar Panels</option>\n                  <option value=\"FD establishment\">FD Establishment</option>\n                  <option value=\"Other\">Other</option>\n                </select>\n              ) : (\n                <StepperSelect\n                  value={formData.loss_type ?? ''}\n                  onChange={value => handleSelectChange('loss_type', value)}\n                  options={[\n                    { value: \"No loss\", label: \"No loss\" },\n                    { value: \"crop\", label: \"Crop\" },\n                    { value: \"livestock\", label: \"Livestock\" },\n                    { value: \"property\", label: \"Property\" },\n                    { value: \"fencing\", label: \"Fencing\" },\n                    { value: \"solar panels\", label: \"Solar Panels\" },\n                    { value: \"FD establishment\", label: \"FD Establishment\" },\n                    { value: \"Other\", label: \"Other\" },\n                  ]}\n                  placeholder=\"Select type of loss\"\n                  className=\"w-full h-12 text-base\"\n                />\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}; ","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useActivityForm } from '@/contexts/ActivityFormContext';\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Compass, Lock, Unlock, RefreshCw, AlertCircle, Camera, Navigation } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { ActivityReport } from '@/types/activity-report';\n\ninterface CompassState {\n  heading: number;\n  accuracy: number;\n  isGPSBased: boolean;\n  isErratic: boolean;\n  speed: number;\n}\n\nconst VELOCITY_THRESHOLD = 1; // meters per second\nconst ERRATIC_THRESHOLD = 45; // degrees\nconst SMOOTHING_WINDOW = 5; // number of readings to average\nconst GPS_ACCURACY_THRESHOLD = 10; // meters\n\ntype DistanceUnit = 'meters' | 'feet';\n\nexport function CompassBearingStep() {\n  const { formData, updateFormData } = useActivityForm();\n  const [isTracking, setIsTracking] = useState(false);\n  const [isLocked, setIsLocked] = useState(false);\n  const [isCalibrating, setIsCalibrating] = useState(false);\n  const [calibrationSamples, setCalibrationSamples] = useState<number[]>([]);\n  const [calibrationOffset, setCalibrationOffset] = useState(0);\n  const [hasPermission, setHasPermission] = useState<boolean | null>(null);\n  const [isIOS, setIsIOS] = useState(false);\n  const [compassMode, setCompassMode] = useState<'gps' | 'manual' | 'visual'>('gps');\n  const [compassState, setCompassState] = useState<CompassState>({\n    heading: 0,\n    accuracy: 0,\n    isGPSBased: false,\n    isErratic: false,\n    speed: 0\n  });\n  \n  const headingHistory = useRef<number[]>([]);\n  const lastPosition = useRef<GeolocationPosition | null>(null);\n  const lastHeading = useRef<number | null>(null);\n  const watchId = useRef<number | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    // Check if device is iOS\n    const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(window as any).MSStream;\n    setIsIOS(isIOSDevice);\n\n    // Load saved calibration offset\n    const savedOffset = localStorage.getItem('compassCalibrationOffset');\n    if (savedOffset) {\n      setCalibrationOffset(parseFloat(savedOffset));\n    }\n\n    // Load saved compass mode\n    const savedMode = localStorage.getItem('compassMode');\n    if (savedMode) {\n      setCompassMode(savedMode as 'gps' | 'manual' | 'visual');\n    }\n\n    // Check if device orientation is supported\n    if (window.DeviceOrientationEvent) {\n      if (isIOSDevice) {\n        setHasPermission(false);\n      } else {\n        setHasPermission(true);\n      }\n    } else {\n      toast.error(\"Device orientation is not supported on this device\");\n      setHasPermission(false);\n    }\n\n    return () => {\n      if (watchId.current !== null) {\n        navigator.geolocation.clearWatch(watchId.current);\n      }\n      if (videoRef.current && videoRef.current.srcObject) {\n        const tracks = (videoRef.current.srcObject as MediaStream).getTracks();\n        tracks.forEach(track => track.stop());\n      }\n    };\n  }, []);\n\n  const requestPermission = async () => {\n    try {\n      if (isIOS && typeof (DeviceOrientationEvent as any).requestPermission === 'function') {\n        const permission = await (DeviceOrientationEvent as any).requestPermission();\n        if (permission === 'granted') {\n          setHasPermission(true);\n          toast.success(\"Compass access granted\");\n        } else {\n          setHasPermission(false);\n          toast.error(\"Compass access denied\");\n        }\n      }\n    } catch (error) {\n      console.error('Error requesting permission:', error);\n      toast.error(\"Failed to get compass access\");\n      setHasPermission(false);\n    }\n  };\n\n  const handleCompassBearingChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    if (!isNaN(value) && value >= 0 && value <= 360) {\n      updateFormData({ compass_bearing: value });\n    }\n  };\n\n  const handleDistanceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseFloat(e.target.value);\n    updateFormData({ distance: isNaN(value) ? null : value });\n  };\n\n  const handleDistanceUnitChange = (value: DistanceUnit) => {\n    updateFormData({ distance_unit: value });\n  };\n\n  const startCalibration = () => {\n    if (compassMode === 'visual') {\n      startVisualCalibration();\n    } else {\n      startManualCalibration();\n    }\n  };\n\n  const startManualCalibration = () => {\n    setIsCalibrating(true);\n    toast.info(\"Point your device north and tap 'Set North' when ready\");\n  };\n\n  const setNorth = () => {\n    if (lastHeading.current !== null) {\n      const offset = (360 - lastHeading.current) % 360;\n      setCalibrationOffset(offset);\n      localStorage.setItem('compassCalibrationOffset', offset.toString());\n      setIsCalibrating(false);\n      toast.success(\"North direction set successfully\");\n    }\n  };\n\n  const startVisualCalibration = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        video: { facingMode: 'environment' } \n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        setIsCalibrating(true);\n        toast.info(\"Align the camera with a known landmark and tap 'Set Direction'\");\n      }\n    } catch (error) {\n      console.error('Error accessing camera:', error);\n      toast.error(\"Failed to access camera\");\n    }\n  };\n\n  const setVisualDirection = () => {\n    if (canvasRef.current && videoRef.current) {\n      const canvas = canvasRef.current;\n      const video = videoRef.current;\n      const context = canvas.getContext('2d');\n      \n      if (context) {\n        // Draw the current frame\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        \n        // Get the image data for analysis\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        \n        // Here you would implement image analysis to determine direction\n        // For now, we'll use a placeholder value\n        const visualHeading = 0; // Replace with actual image analysis\n        \n        setCalibrationOffset(visualHeading);\n        localStorage.setItem('compassCalibrationOffset', visualHeading.toString());\n        setIsCalibrating(false);\n        toast.success(\"Direction set from visual reference\");\n      }\n    }\n  };\n\n  const handleGPSUpdate = useCallback((position: GeolocationPosition) => {\n    if (!isTracking || isLocked || !lastPosition.current) {\n      lastPosition.current = position;\n      return;\n    }\n\n    const { speed, accuracy } = position.coords;\n    const prevPos = lastPosition.current.coords;\n    const currPos = position.coords;\n\n    // Update compass state with speed\n    setCompassState(prev => ({\n      ...prev,\n      speed: speed || 0,\n      accuracy: accuracy <= GPS_ACCURACY_THRESHOLD ? 1 : 0.5\n    }));\n\n    // Use GPS heading when moving fast enough\n    if (speed && speed > VELOCITY_THRESHOLD) {\n      const heading = Math.round(\n        (Math.atan2(\n          currPos.longitude - prevPos.longitude,\n          currPos.latitude - prevPos.latitude\n        ) * 180 / Math.PI + 360) % 360\n      );\n\n      setCompassState(prev => ({\n        ...prev,\n        heading,\n        isGPSBased: true,\n        isErratic: false\n      }));\n\n      if (!isLocked) {\n        updateFormData({ compass_bearing: heading });\n      }\n    } else if (compassMode === 'manual' && lastHeading.current !== null) {\n      // Use manual calibration when not moving\n      const calibratedHeading = (lastHeading.current + calibrationOffset) % 360;\n      setCompassState(prev => ({\n        ...prev,\n        heading: calibratedHeading,\n        isGPSBased: false,\n        isErratic: false\n      }));\n\n      if (!isLocked) {\n        updateFormData({ compass_bearing: calibratedHeading });\n      }\n    }\n\n    lastPosition.current = position;\n  }, [isTracking, isLocked, updateFormData, compassMode, calibrationOffset]);\n\n  const handleDeviceOrientation = useCallback((event: DeviceOrientationEvent & { webkitCompassHeading?: number }) => {\n    if (!isTracking || isLocked) return;\n\n    let heading = 0;\n    if (isIOS && event.webkitCompassHeading) {\n      heading = event.webkitCompassHeading;\n    } else if (event.alpha !== null) {\n      heading = Math.round((360 - event.alpha) % 360);\n    }\n\n    lastHeading.current = heading;\n\n    // Only use device orientation in manual mode when not moving\n    if (compassMode === 'manual' && compassState.speed <= VELOCITY_THRESHOLD) {\n      const calibratedHeading = (heading + calibrationOffset) % 360;\n      \n      // Update heading history for smoothing\n      headingHistory.current = [...headingHistory.current.slice(-SMOOTHING_WINDOW + 1), calibratedHeading];\n      \n      // Calculate smoothed heading\n      const smoothedHeading = Math.round(\n        headingHistory.current.reduce((a, b) => a + b, 0) / headingHistory.current.length\n      );\n\n      setCompassState(prev => ({\n        ...prev,\n        heading: smoothedHeading,\n        accuracy: 0.8,\n        isGPSBased: false,\n        isErratic: false\n      }));\n\n      if (!isLocked) {\n        updateFormData({ compass_bearing: smoothedHeading });\n      }\n    }\n  }, [isTracking, isLocked, calibrationOffset, updateFormData, compassMode, compassState.speed]);\n\n  useEffect(() => {\n    if (isTracking) {\n      // Start GPS tracking\n      watchId.current = navigator.geolocation.watchPosition(\n        handleGPSUpdate,\n        (error) => console.error('GPS Error:', error),\n        { enableHighAccuracy: true }\n      );\n\n      // Add device orientation listener for manual mode\n      if (compassMode === 'manual') {\n        window.addEventListener('deviceorientation', handleDeviceOrientation as EventListener);\n      }\n    }\n    return () => {\n      if (watchId.current !== null) {\n        navigator.geolocation.clearWatch(watchId.current);\n      }\n      window.removeEventListener('deviceorientation', handleDeviceOrientation as EventListener);\n    };\n  }, [isTracking, handleGPSUpdate, handleDeviceOrientation, compassMode]);\n\n  const toggleTracking = () => {\n    setIsTracking(!isTracking);\n    if (!isTracking) {\n      toast.info(\"Compass tracking started\");\n    } else {\n      toast.info(\"Compass tracking stopped\");\n    }\n  };\n\n  const toggleLock = () => {\n    setIsLocked(!isLocked);\n    if (!isLocked) {\n      toast.info(\"Compass bearing locked\");\n    } else {\n      toast.info(\"Compass bearing unlocked\");\n    }\n  };\n\n  const handleModeChange = (mode: 'gps' | 'manual' | 'visual') => {\n    setCompassMode(mode);\n    localStorage.setItem('compassMode', mode);\n    toast.info(`Switched to ${mode} mode`);\n  };\n\n  const getAccuracyColor = (accuracy: number) => {\n    if (accuracy >= 0.8) return \"bg-green-500\";\n    if (accuracy >= 0.5) return \"bg-yellow-500\";\n    return \"bg-red-500\";\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col items-center space-y-4\">\n            <Tabs defaultValue={compassMode} onValueChange={(v) => handleModeChange(v as 'gps' | 'manual' | 'visual')}>\n              <TabsList>\n                <TabsTrigger value=\"gps\">\n                  <Navigation className=\"w-4 h-4 mr-2\" />\n                  GPS\n                </TabsTrigger>\n                <TabsTrigger value=\"manual\">\n                  <Compass className=\"w-4 h-4 mr-2\" />\n                  Manual\n                </TabsTrigger>\n                <TabsTrigger value=\"visual\">\n                  <Camera className=\"w-4 h-4 mr-2\" />\n                  Visual\n                </TabsTrigger>\n              </TabsList>\n            </Tabs>\n\n            <div className=\"flex items-center space-x-4\">\n              <Button\n                variant={isTracking ? \"destructive\" : \"default\"}\n                onClick={toggleTracking}\n                className=\"flex items-center space-x-2\"\n              >\n                <Compass className={`w-4 h-4 ${isTracking ? 'animate-spin' : ''}`} />\n                <span>{isTracking ? 'Stop Tracking' : 'Start Tracking'}</span>\n              </Button>\n\n              <Button\n                variant={isLocked ? \"default\" : \"outline\"}\n                onClick={toggleLock}\n                className=\"flex items-center space-x-2\"\n                disabled={!isTracking}\n              >\n                {isLocked ? <Lock className=\"w-4 h-4\" /> : <Unlock className=\"w-4 h-4\" />}\n                <span>{isLocked ? 'Unlock' : 'Lock'}</span>\n              </Button>\n\n              {isCalibrating ? (\n                <Button\n                  variant=\"default\"\n                  onClick={compassMode === 'visual' ? setVisualDirection : setNorth}\n                  className=\"flex items-center space-x-2\"\n                >\n                  <Navigation className=\"w-4 h-4\" />\n                  <span>Set {compassMode === 'visual' ? 'Direction' : 'North'}</span>\n                </Button>\n              ) : (\n                <Button\n                  variant=\"outline\"\n                  onClick={startCalibration}\n                  className=\"flex items-center space-x-2\"\n                  disabled={!isTracking}\n                >\n                  <RefreshCw className={`w-4 h-4 ${isCalibrating ? 'animate-spin' : ''}`} />\n                  <span>Calibrate</span>\n                </Button>\n              )}\n            </div>\n\n            <div className=\"text-center space-y-2\">\n              <Label htmlFor=\"compass_bearing\" className=\"text-lg\">\n                Compass Bearing (0-360°)\n              </Label>\n              <div className=\"flex items-center space-x-2\">\n                <Input\n                  type=\"number\"\n                  id=\"compass_bearing\"\n                  min=\"0\"\n                  max=\"360\"\n                  value={formData.compass_bearing || ''}\n                  onChange={handleCompassBearingChange}\n                  className=\"w-32 text-center\"\n                  disabled={isTracking && !isLocked}\n                />\n                <span className=\"text-lg\">°</span>\n              </div>\n            </div>\n\n            {isTracking && (\n              <div className=\"w-full space-y-2\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span>Accuracy:</span>\n                  <div className=\"flex items-center space-x-2\">\n                    <Progress value={compassState.accuracy * 100} className=\"w-24\" />\n                    <span className={`w-3 h-3 rounded-full ${getAccuracyColor(compassState.accuracy)}`} />\n                  </div>\n                </div>\n                {compassState.isGPSBased && (\n                  <div className=\"text-sm text-blue-500\">\n                    Using GPS-based heading (Speed: {compassState.speed.toFixed(1)} m/s)\n                  </div>\n                )}\n                {compassState.isErratic && (\n                  <div className=\"flex items-center space-x-2 text-sm text-red-500\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    <span>Compass readings are erratic. Please calibrate or use manual mode.</span>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {compassMode === 'visual' && isCalibrating && (\n              <div className=\"relative w-full aspect-video\">\n                <video\n                  ref={videoRef}\n                  autoPlay\n                  playsInline\n                  className=\"w-full h-full object-cover rounded-lg\"\n                />\n                <canvas\n                  ref={canvasRef}\n                  className=\"hidden\"\n                  width={640}\n                  height={480}\n                />\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-32 h-32 border-2 border-white rounded-full opacity-50\" />\n                </div>\n              </div>\n            )}\n\n            <div className=\"text-sm text-gray-500 text-center max-w-md\">\n              Enter the compass bearing in degrees, where:\n              <ul className=\"mt-2 space-y-1\">\n                <li>0° or 360° = North</li>\n                <li>90° = East</li>\n                <li>180° = South</li>\n                <li>270° = West</li>\n              </ul>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"distance\">Distance</Label>\n              <div className=\"flex gap-2\">\n                <Input\n                  id=\"distance\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={formData.distance ?? ''}\n                  onChange={handleDistanceChange}\n                  placeholder=\"Enter distance\"\n                />\n                <Select\n                  value={formData.distance_unit ?? 'meters'}\n                  onValueChange={handleDistanceUnitChange}\n                >\n                  <SelectTrigger className=\"w-[120px]\">\n                    <SelectValue placeholder=\"Unit\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"meters\">Meters</SelectItem>\n                    <SelectItem value=\"feet\">Feet</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n} ","import React, { useState, useRef } from 'react';\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Button } from \"@/components/ui/button\";\nimport { useActivityForm } from '@/contexts/ActivityFormContext';\nimport { ActivityReport } from '@/types/activity-report';\nimport { Camera, Upload } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { supabase } from '@/lib/supabase';\n\nexport const PhotoStep: React.FC = () => {\n  const { formData, updateFormData } = useActivityForm();\n  const [isUploading, setIsUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      toast.error('Please select an image file');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      toast.error('Image size should be less than 5MB');\n      return;\n    }\n\n    setIsUploading(true);\n    try {\n      const fileExt = file.name.split('.').pop();\n      const fileName = `${Math.random()}.${fileExt}`;\n      const filePath = `activity-photos/${fileName}`;\n\n      const { error: uploadError } = await supabase.storage\n        .from('photos')\n        .upload(filePath, file);\n\n      if (uploadError) {\n        throw uploadError;\n      }\n\n      const { data: { publicUrl } } = supabase.storage\n        .from('photos')\n        .getPublicUrl(filePath);\n\n      updateFormData({ photo_url: publicUrl });\n      toast.success('Photo uploaded successfully');\n    } catch (error) {\n      console.error('Error uploading photo:', error);\n      toast.error('Failed to upload photo');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleCameraClick = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"space-y-4\">\n            <div>\n              <Label>Photo</Label>\n              <div className=\"mt-2 flex flex-col items-center justify-center\">\n                {formData.photo_url ? (\n                  <div className=\"relative w-full max-w-md\">\n                    <img\n                      src={formData.photo_url}\n                      alt=\"Activity photo\"\n                      className=\"w-full h-64 object-cover rounded-lg\"\n                    />\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      className=\"absolute top-2 right-2\"\n                      onClick={() => updateFormData({ photo_url: undefined })}\n                    >\n                      Remove\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"w-full max-w-md h-64 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center\">\n                    <Camera className=\"w-12 h-12 text-gray-400 mb-4\" />\n                    <p className=\"text-gray-500 mb-4\">No photo selected</p>\n                    <Button\n                      onClick={handleCameraClick}\n                      disabled={isUploading}\n                    >\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      {isUploading ? 'Uploading...' : 'Upload Photo'}\n                    </Button>\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\"image/*\"\n                      capture=\"environment\"\n                      onChange={handleFileChange}\n                      className=\"hidden\"\n                    />\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}; ","/**\n * Platform-specific utilities for handling Android and web differences\n */\n\n// Check if running in Android WebView\nexport const isAndroid = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  // Check for Android WebView user agent\n  const userAgent = window.navigator.userAgent.toLowerCase();\n  return userAgent.includes('android') && userAgent.includes('wv');\n};\n\n// Check if running in a mobile browser\nexport const isMobile = (): boolean => {\n  if (typeof window === 'undefined') return false;\n  \n  const userAgent = window.navigator.userAgent.toLowerCase();\n  return /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent);\n};\n\n// Get platform-specific storage\nexport const getPlatformStorage = () => {\n  if (isAndroid()) {\n    // Use Android's native storage\n    return {\n      getItem: async (key: string) => {\n        try {\n          // @ts-ignore - Android interface\n          return await window.Android.getStorageItem(key);\n        } catch (e) {\n          console.warn('Failed to get item from Android storage:', e);\n          return null;\n        }\n      },\n      setItem: async (key: string, value: string) => {\n        try {\n          // @ts-ignore - Android interface\n          await window.Android.setStorageItem(key, value);\n        } catch (e) {\n          console.warn('Failed to set item in Android storage:', e);\n        }\n      },\n      removeItem: async (key: string) => {\n        try {\n          // @ts-ignore - Android interface\n          await window.Android.removeStorageItem(key);\n        } catch (e) {\n          console.warn('Failed to remove item from Android storage:', e);\n        }\n      }\n    };\n  }\n  \n  // Default to localStorage for web\n  return {\n    getItem: async (key: string) => localStorage.getItem(key),\n    setItem: async (key: string, value: string) => localStorage.setItem(key, value),\n    removeItem: async (key: string) => localStorage.removeItem(key)\n  };\n};\n\n// Get platform-specific file system\nexport const getPlatformFileSystem = () => {\n  if (isAndroid()) {\n    return {\n      saveFile: async (filename: string, data: string) => {\n        try {\n          // @ts-ignore - Android interface\n          await window.Android.saveFile(filename, data);\n          return true;\n        } catch (e) {\n          console.warn('Failed to save file in Android:', e);\n          return false;\n        }\n      },\n      readFile: async (filename: string) => {\n        try {\n          // @ts-ignore - Android interface\n          return await window.Android.readFile(filename);\n        } catch (e) {\n          console.warn('Failed to read file from Android:', e);\n          return null;\n        }\n      },\n      deleteFile: async (filename: string) => {\n        try {\n          // @ts-ignore - Android interface\n          await window.Android.deleteFile(filename);\n          return true;\n        } catch (e) {\n          console.warn('Failed to delete file in Android:', e);\n          return false;\n        }\n      }\n    };\n  }\n  \n  // Default to browser's File System Access API or fallback\n  return {\n    saveFile: async (filename: string, data: string) => {\n      try {\n        const blob = new Blob([data], { type: 'text/plain' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = filename;\n        a.click();\n        URL.revokeObjectURL(url);\n        return true;\n      } catch (e) {\n        console.warn('Failed to save file:', e);\n        return false;\n      }\n    },\n    readFile: async (filename: string) => {\n      // Not implemented for web\n      return null;\n    },\n    deleteFile: async (filename: string) => {\n      // Not implemented for web\n      return false;\n    }\n  };\n};\n\n// Get platform-specific network status\nexport const getPlatformNetworkStatus = () => {\n  if (isAndroid()) {\n    return {\n      isOnline: async () => {\n        try {\n          // @ts-ignore - Android interface\n          return await window.Android.isNetworkAvailable();\n        } catch (e) {\n          console.warn('Failed to check network status in Android:', e);\n          return navigator.onLine;\n        }\n      }\n    };\n  }\n  \n  // Default to browser's online status\n  return {\n    isOnline: async () => navigator.onLine\n  };\n}; ","import { useEffect, useState } from 'react';\nimport { getPlatformNetworkStatus } from './platform';\n\nconst platformNetwork = getPlatformNetworkStatus();\n\n// Simple check that doesn't require authentication\nexport const checkNetworkStatus = async (): Promise<boolean> => {\n  try {\n    // First check if we're in a browser environment\n    if (typeof window === 'undefined') return false;\n    \n    // Check basic online status\n    if (!navigator.onLine) return false;\n    \n    // Check platform-specific network status if available\n    if (typeof platformNetwork?.isOnline === 'function') {\n      const isPlatformOnline = await platformNetwork.isOnline();\n      if (!isPlatformOnline) return false;\n    }\n    \n    // Try to fetch a small public resource\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 3000);\n\n    try {\n      // Use a public endpoint that doesn't require authentication\n      const response = await fetch('https://httpbin.org/get', {\n        method: 'HEAD',\n        signal: controller.signal,\n        cache: 'no-store',\n      });\n      clearTimeout(timeoutId);\n      return response.ok;\n    } catch (error) {\n      console.warn('Network check failed, falling back to basic online check');\n      return navigator.onLine;\n    }\n  } catch (error) {\n    console.warn('Network check failed:', error);\n    return false;\n  }\n};\n\nexport const useNetworkStatus = () => {\n  const [isOnline, setIsOnline] = useState(true);\n\n  useEffect(() => {\n    const updateNetworkStatus = async () => {\n      const status = await checkNetworkStatus();\n      setIsOnline(status);\n    };\n\n    // Initial check\n    updateNetworkStatus();\n\n    // Set up event listeners\n    const handleOnline = () => {\n      setIsOnline(true);\n      // Verify connection when coming back online\n      updateNetworkStatus();\n    };\n\n    const handleOffline = () => {\n      setIsOnline(false);\n    };\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    // Set up periodic checks\n    const intervalId = setInterval(updateNetworkStatus, 30000); // Check every 30 seconds\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n      clearInterval(intervalId);\n    };\n  }, []);\n\n  return isOnline;\n}; ","import React from 'react';\nimport { useNetworkStatus } from '@/utils/networkStatus';\n\nexport function SyncStatus() {\n  const isOnline = useNetworkStatus();\n\n  return (\n    <div className=\"fixed bottom-4 right-4 z-50\">\n      <div className={`px-4 py-2 rounded-full shadow-lg ${\n        isOnline ? 'bg-green-500' : 'bg-red-500'\n      } text-white`}>\n        {isOnline ? 'Online' : 'Offline'}\n      </div>\n    </div>\n  );\n} ","import React, { useState, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Button } from \"@/components/ui/button\";\nimport { MapPin, FileText, Compass, Camera } from \"lucide-react\";\nimport { ActivityFormProvider, useActivityForm, FormStep } from '@/contexts/ActivityFormContext';\nimport { DateTimeLocationStep } from '@/components/form-steps/DateTimeLocationStep';\nimport { ObservationTypeStep } from '@/components/form-steps/ObservationTypeStep';\nimport { CompassBearingStep } from '@/components/form-steps/CompassBearingStep';\nimport { PhotoStep } from '@/components/form-steps/PhotoStep';\nimport { toast } from \"sonner\";\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/NewAuthContext';\nimport { supabase } from '@/lib/supabaseClient';\nimport { useNetworkStatus } from '@/utils/networkStatus';\nimport { SyncStatus } from '@/components/SyncStatus';\nimport { ActivityReport, ActivityReportInput, ObservationType, IndirectSightingType, LossType } from '@/types/activity-report';\n\ninterface StepConfig {\n  type: FormStep;\n  title: string;\n  icon: React.ReactNode;\n  component: React.ComponentType;\n}\n\nconst steps: StepConfig[] = [\n  {\n    type: 'dateTimeLocation',\n    title: \"Date/Time & Location\",\n    icon: <MapPin className=\"w-5 h-5\" />,\n    component: DateTimeLocationStep,\n  },\n  {\n    type: 'observationType',\n    title: \"Type of Observation\",\n    icon: <FileText className=\"w-5 h-5\" />,\n    component: ObservationTypeStep,\n  },\n  {\n    type: 'compassBearing',\n    title: \"Compass Bearing\",\n    icon: <Compass className=\"w-5 h-5\" />,\n    component: CompassBearingStep,\n  },\n  {\n    type: 'photo',\n    title: \"Photo\",\n    icon: <Camera className=\"w-5 h-5\" />,\n    component: PhotoStep,\n  },\n];\n\ninterface ActivityReportStepperProps {\n  onSubmit: (reportData: Partial<ActivityReport>) => Promise<void>;\n  isSubmitting: boolean;\n}\n\ninterface ActivityFormData {\n  observation_type: ObservationType;\n  latitude: string | number;\n  longitude: string | number;\n  distance?: number;\n  distance_unit?: 'meters' | 'feet';\n  description?: string;\n  photo_url?: string | null;\n  indirect_sighting_type?: IndirectSightingType | null;\n  loss_type?: LossType | null;\n  activity_date?: Date;\n  activity_time?: string;\n}\n\nconst formatDate = (date: Date | string | undefined): string => {\n  if (!date) return '';\n  const d = date instanceof Date ? date : new Date(date);\n  return d.toISOString().split('T')[0];\n};\n\nconst StepperContent: React.FC<ActivityReportStepperProps> = ({ onSubmit, isSubmitting: externalIsSubmitting }) => {\n  const { currentStep, formData, goToNextStep, goToPreviousStep, isStepValid, isLastStep, resetForm } = useActivityForm();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const isOnline = useNetworkStatus();\n  const currentStepIndex = steps.findIndex(step => step.type === currentStep);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  \n  const isActuallySubmitting = isSubmitting || externalIsSubmitting;\n\n  const handleSubmit = useCallback(async () => {\n    try {\n      setIsSubmitting(true);\n      setError(null);\n      setSuccess(null);\n      \n      if (!formData.activity_date || !formData.activity_time || !formData.observation_type) {\n        toast.error('Please fill in all required fields');\n        return;\n      }\n\n      let userId = user?.id || null;\n      \n      if (isOnline && !userId) {\n        const { data: { session } } = await supabase.auth.getSession();\n        if (session?.user) {\n          userId = session.user.id;\n        }\n      }\n      \n      const formattedDate = formatDate(formData.activity_date);\n      const formattedTime = formData.activity_time || '';\n      \n      // Prepare the report data with all required fields\n      const reportData: Partial<ActivityReport> = {\n        // Required fields\n        user_id: userId || '',\n        status: 'draft',\n        activity_date: new Date(formattedDate),\n        activity_time: formattedTime,\n        observation_type: formData.observation_type as ObservationType,\n        latitude: String(formData.latitude || '0'),\n        longitude: String(formData.longitude || '0'),\n        is_offline: !isOnline,\n        \n        // Optional fields with type conversion\n        total_elephants: formData.total_elephants ? Number(formData.total_elephants) : undefined,\n        male_elephants: formData.male_elephants ? Number(formData.male_elephants) : undefined,\n        female_elephants: formData.female_elephants ? Number(formData.female_elephants) : undefined,\n        unknown_elephants: formData.unknown_elephants ? Number(formData.unknown_elephants) : undefined,\n        calves: formData.calves ? Number(formData.calves) : undefined,\n        compass_bearing: formData.compass_bearing ? Number(formData.compass_bearing) : undefined,\n        distance: formData.distance != null ? Number(formData.distance) : undefined,\n        distance_unit: formData.distance_unit || undefined,\n        description: formData.description || undefined,\n        photo_url: formData.photo_url || undefined,\n        indirect_sighting_type: formData.indirect_sighting_type as IndirectSightingType | undefined,\n        loss_type: formData.loss_type as LossType | undefined\n      };\n      \n      // Ensure required fields are present\n      if (!reportData.observation_type) {\n        throw new Error('Observation type is required');\n      }\n      if (!reportData.latitude || !reportData.longitude) {\n        throw new Error('Location is required');\n      }\n      \n      if (isOnline) {\n        try {\n          await onSubmit(reportData);\n          toast.success('Activity report submitted successfully');\n          resetForm();\n          navigate('/');\n        } catch (error) {\n          toast.error('Online submission failed. Report saved offline.');\n        }\n      } else {\n        toast.success('You are offline. Report saved locally and will be synced when online.');\n        resetForm();\n        navigate('/');\n      }\n    } catch (error: any) {\n      console.error('Error submitting activity report:', error);\n      toast.error(error.message || 'Failed to submit report');\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [formData, isOnline, navigate, onSubmit, resetForm, user]);\n\n  const CurrentStepComponent = steps.find(step => step.type === currentStep)?.component || null;\n\n  if (!isOnline) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-red-600 mb-4\">No Internet Connection</h2>\n          <p className=\"text-gray-600\">Please check your internet connection and try again.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-2 sm:p-4\">\n      <Card className=\"w-full max-w-full sm:max-w-2xl bg-white rounded-xl shadow-sm border border-gray-100 mx-auto\">\n        <CardHeader className=\"space-y-4 sm:space-y-6 p-4 sm:p-6 border-b border-gray-100\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0\">\n            <CardTitle className=\"text-lg sm:text-2xl font-bold text-gray-900\">\n              Elephant Watch Report\n            </CardTitle>\n            <div className=\"flex items-center gap-2 sm:gap-3 w-full sm:w-auto\">\n              <span className=\"text-xs sm:text-sm font-medium text-gray-600\">\n                Step {currentStepIndex + 1} of {steps.length}\n              </span>\n              <Progress \n                value={((currentStepIndex + 1) / steps.length) * 100} \n                className=\"w-full sm:w-48 h-2 bg-gray-100\" \n              />\n            </div>\n          </div>\n          <div className=\"flex flex-nowrap overflow-x-auto gap-2 pb-2 sm:pb-0 -mx-2 sm:mx-0 px-2 sm:px-0\">\n            {steps.map((step, index) => (\n              <Button\n                key={step.type}\n                variant={index === currentStepIndex ? \"default\" : \"outline\"}\n                size=\"sm\"\n                className={\n                  `flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-md transition-colors whitespace-nowrap text-xs sm:text-sm\n                  ${index === currentStepIndex \n                    ? 'bg-blue-600 hover:bg-blue-700 text-white border-blue-600' \n                    : 'bg-white hover:bg-gray-50 text-gray-600 border-gray-200'}`\n                }\n                disabled={index > currentStepIndex && !isStepValid(steps[index - 1].type)}\n              >\n                {step.icon}\n                {step.title}\n              </Button>\n            ))}\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-4 sm:p-6\">\n          {CurrentStepComponent && <CurrentStepComponent />}\n          <div className=\"flex flex-col sm:flex-row justify-between mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-100 gap-2 sm:gap-0\">\n            <Button\n              variant=\"outline\"\n              onClick={goToPreviousStep}\n              disabled={currentStepIndex === 0 || isActuallySubmitting}\n              className=\"border-gray-200 text-gray-600 hover:bg-gray-50 w-full sm:w-auto\"\n            >\n              Previous\n            </Button>\n            {isLastStep() ? (\n              <Button\n                onClick={handleSubmit}\n                disabled={!isStepValid(currentStep) || isActuallySubmitting}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto\"\n              >\n                {isActuallySubmitting ? 'Submitting...' : 'Submit Report'}\n              </Button>\n            ) : (\n              <Button\n                onClick={goToNextStep}\n                disabled={!isStepValid(currentStep) || isActuallySubmitting}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto\"\n              >\n                Next\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n      <SyncStatus />\n    </div>\n  );\n};\n\nexport const ActivityReportStepper: React.FC<ActivityReportStepperProps> = (props) => {\n  return (\n    <ActivityFormProvider>\n      <StepperContent {...props} />\n    </ActivityFormProvider>\n  );\n};\n\nexport default ActivityReportStepper;\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","import React, { useState } from 'react';\nimport { ActivityReportStepper } from \"@/components/ActivityReportStepper\";\nimport { supabase } from '@/lib/supabase';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from \"sonner\";\nimport { useAuth } from '@/contexts/NewAuthContext';\nimport { ActivityReport } from '@/types/activity-report';\nimport { Card } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\nimport { useNetworkStatus } from '@/utils/networkStatus';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { isAndroid } from '@/utils/platform';\n\nconst ReportActivityPage = () => {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { user, loading: isAuthLoading } = useAuth();\n  const navigate = useNavigate();\n  const isOnline = useNetworkStatus();\n\n  // Check authentication status\n  React.useEffect(() => {\n    if (!isAuthLoading && !user) {\n      navigate('/login');\n    }\n  }, [user, isAuthLoading, navigate]);\n\n  if (isAuthLoading) {\n    return <div className=\"flex items-center justify-center h-screen\">Loading...</div>;\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  const handleSubmit = async (reportData: Partial<ActivityReport>) => {\n    setIsSubmitting(true);\n    try {\n      const { error: insertError } = await supabase\n        .from('activity_reports')\n        .insert([reportData]);\n\n      if (insertError) throw insertError;\n\n      toast.success('Activity report submitted successfully');\n      navigate('/activities');\n    } catch (err) {\n      console.error('Error submitting report:', err);\n      toast.error('Failed to submit report');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"container mx-auto p-2 sm:p-4\">\n        <header className=\"mb-8\">\n          <h1 className=\"text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl\">\n            Wild Elephant Monitoring System\n          </h1>\n          <h2 className=\"mt-2 text-2xl font-semibold text-gray-600\">\n            जंगली हाथी निगरानी प्रणाली (2025)\n          </h2>\n        </header>\n\n        {!isOnline && (\n          <Alert className=\"mb-4\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertTitle>Offline Mode</AlertTitle>\n            <AlertDescription>\n              You are currently offline. Your report will be saved locally and synced when you are back online.\n            </AlertDescription>\n          </Alert>\n        )}\n\n        <Card className=\"mb-8 overflow-hidden border border-blue-100 bg-white shadow-sm\">\n          <div className=\"p-6\">\n            <div className=\"flex items-start gap-3\">\n              <AlertCircle className=\"h-6 w-6 text-blue-600 flex-shrink-0 mt-1\" />\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">निर्देश / Instructions:</h3>\n                <ul className=\"space-y-3 text-gray-600\">\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-blue-600\">•</span>\n                    <span>\n                      इस फॉर्म को चार चरणों में पूरा करें: तारीख/समय और स्थान, अवलोकन का प्रकार, कम्पास बेयरिंग, और फोटो।\n                      <br />\n                      <span className=\"text-gray-500\">Complete this form in four steps: Date/Time & Location, Type of Observation, Compass Bearing, and Photo.</span>\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-blue-600\">•</span>\n                    <span>\n                      प्रत्येक चरण में आवश्यक जानकारी भरें और 'Next' बटन पर क्लिक करें। पिछले चरण पर जाने के लिए 'Previous' बटन का उपयोग करें।\n                      <br />\n                      <span className=\"text-gray-500\">Fill in the required information in each step and click 'Next'. Use 'Previous' to go back to earlier steps.</span>\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-blue-600\">•</span>\n                    <span>\n                      GPS लोकेशन को Degree Decimal फॉर्मेट में भरें (उदाहरण: 23.4536 81.4763)। सटीक स्थान महत्वपूर्ण है।\n                      <br />\n                      <span className=\"text-gray-500\">Enter GPS location in Degree Decimal format (Example: 23.4536 81.4763). Accurate location is crucial.</span>\n                    </span>\n                  </li>\n                  <li className=\"flex items-start gap-2\">\n                    <span className=\"text-blue-600\">•</span>\n                    <span>\n                      अवलोकन के प्रकार के अनुसार, हाथियों की संख्या या अप्रत्यक्ष साक्ष्य का विवरण दें।\n                      <br />\n                      <span className=\"text-gray-500\">Based on observation type, provide elephant count or indirect evidence details.</span>\n                    </span>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </Card>\n\n        <main className=\"max-w-4xl mx-auto\">\n          <ActivityReportStepper onSubmit={handleSubmit} isSubmitting={isSubmitting} />\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportActivityPage;"],"names":["Camera","createLucideIcon","Compass","LockOpen","Lock","Navigation","Upload","PROGRESS_NAME","DEFAULT_MAX","createProgressContext","createProgressScope","createContextScope","ProgressProvider","useProgressContext","Progress","React.forwardRef","props","forwardedRef","__scopeProgress","valueProp","maxProp","getValueLabel","defaultGetValueLabel","progressProps","isValidMaxNumber","getInvalidMaxError","max","isValidValueNumber","getInvalidValueError","value","valueLabel","isNumber","jsx","Primitive","getProgressState","INDICATOR_NAME","ProgressIndicator","indicatorProps","context","maxValue","propValue","componentName","Root","Indicator","className","ref","ProgressPrimitive.Root","cn","ProgressPrimitive.Indicator","initialFormData","ActivityFormContext","createContext","ActivityFormProvider","children","currentStep","setCurrentStep","useState","formData","setFormData","steps","goToNextStep","currentIndex","goToPreviousStep","updateFormData","data","prev","isStepValid","step","isLastStep","resetForm","useActivityForm","useContext","useGeolocation","state","setState","useEffect","successHandler","position","errorHandler","error","DateTimeLocationStep","latitude","longitude","geoError","jsxs","Label","Input","e","RADIO_NAME","createRadioContext","createRadioScope","RadioProvider","useRadioContext","Radio","__scopeRadio","name","checked","required","disabled","onCheck","form","radioProps","button","setButton","React.useState","composedRefs","useComposedRefs","node","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","getState","composeEventHandlers","event","RadioBubbleInput","RadioIndicator","forceMount","Presence","BUBBLE_INPUT_NAME","control","bubbles","prevChecked","usePrevious","controlSize","useSize","React.useEffect","input","inputProto","setChecked","ARROW_KEYS","RADIO_GROUP_NAME","createRadioGroupContext","createRadioGroupScope","createContextScope2","createRovingFocusGroupScope","useRovingFocusGroupScope","useRadioScope","RadioGroupProvider","useRadioGroupContext","RadioGroup","React2.forwardRef","__scopeRadioGroup","defaultValue","orientation","dir","loop","onValueChange","groupProps","rovingFocusGroupScope","direction","useDirection","setValue","useControllableState","jsx2","RovingFocusGroup.Root","Primitive2","ITEM_NAME","RadioGroupItem","itemProps","isDisabled","radioScope","React2.useRef","useComposedRefs2","isArrowKeyPressedRef","React2.useEffect","handleKeyDown","handleKeyUp","RovingFocusGroup.Item","composeEventHandlers2","_a","INDICATOR_NAME2","RadioGroupIndicator","Root2","Item2","RadioGroupPrimitive.Root","RadioGroupPrimitive.Item","RadioGroupPrimitive.Indicator","Circle","CrossPlatformSelect","forwardRef","onChange","options","placeholder","isAndroid","opt","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","SimpleSelect","StepperSelect","observationTypes","indirectSightingTypes","lossTypes","ObservationTypeStep","handleObservationTypeChange","handleIndirectSightingTypeChange","handleLossTypeChange","debouncedSetFormData","useMemo","debounce","updates","handleNumberChange","useCallback","field","num","handleSelectChange","Card","CardContent","type","VELOCITY_THRESHOLD","GPS_ACCURACY_THRESHOLD","CompassBearingStep","isTracking","setIsTracking","isLocked","setIsLocked","isCalibrating","setIsCalibrating","calibrationSamples","setCalibrationSamples","calibrationOffset","setCalibrationOffset","hasPermission","setHasPermission","isIOS","setIsIOS","compassMode","setCompassMode","compassState","setCompassState","headingHistory","useRef","lastPosition","lastHeading","watchId","videoRef","canvasRef","isIOSDevice","savedOffset","savedMode","toast","track","handleCompassBearingChange","handleDistanceChange","handleDistanceUnitChange","startCalibration","startVisualCalibration","startManualCalibration","setNorth","offset","stream","setVisualDirection","canvas","video","visualHeading","handleGPSUpdate","speed","accuracy","prevPos","currPos","heading","calibratedHeading","handleDeviceOrientation","smoothedHeading","a","b","toggleTracking","toggleLock","handleModeChange","mode","getAccuracyColor","Tabs","v","TabsList","TabsTrigger","Button","Unlock","RefreshCw","AlertCircle","PhotoStep","isUploading","setIsUploading","fileInputRef","handleFileChange","file","fileExt","filePath","uploadError","supabase","publicUrl","handleCameraClick","userAgent","getPlatformNetworkStatus","platformNetwork","checkNetworkStatus","controller","timeoutId","response","useNetworkStatus","isOnline","setIsOnline","updateNetworkStatus","status","handleOnline","handleOffline","intervalId","SyncStatus","MapPin","FileText","formatDate","date","StepperContent","onSubmit","externalIsSubmitting","isSubmitting","setIsSubmitting","navigate","useNavigate","user","useAuth","currentStepIndex","setError","success","setSuccess","isActuallySubmitting","handleSubmit","userId","session","formattedDate","formattedTime","reportData","CurrentStepComponent","CardHeader","CardTitle","index","ActivityReportStepper","alertVariants","cva","Alert","variant","AlertTitle","AlertDescription","ReportActivityPage","isAuthLoading","React","insertError","err"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,11]}